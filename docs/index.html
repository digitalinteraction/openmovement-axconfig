<!doctype html><html lang="en" UNUSED_manifest="cache.appcache"><head><meta charset="utf-8"><title>AX Configure</title><link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;," _href="icon.ico"><style type="text/css">body,html{height:100%;width:100%}html{font-family:sans-serif;background:#f5f5f5}body{margin:0;display:grid;grid-template-rows:auto fit-content(35vh)}.main{overflow:auto;margin:.5em}fieldset{max-width:40em;margin:.5em auto}.status{font-size:150%;font-weight:700;margin-bottom:1em}#warnings,.main_button,.status,h1{text-align:center}#output::-webkit-scrollbar{width:.5em}#output::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3)}#output::-webkit-scrollbar-thumb{background-color:#a9a9a9;outline:1px solid #708090}#output{box-shadow:inset 4px 4px 10px #aaa;background:#fff;color:#000;margin-top:1em;font-family:monospace;overflow-y:auto;padding:.3em 0 .3em .3em;border-radius:4px;height:35vh;display:none}body.console #output{display:block}#output p{font-size:14px;font-weight:700;padding:.2em;margin:0}#output p:nth-child(odd){background:linear-gradient(180deg,rgba(51,238,238,.13),rgba(51,238,238,.13) 50%,rgba(51,153,153,.13) 0,rgba(51,153,85,.13));background-size:100% 2px}.button{box-shadow:inset 0 1px 0 0 #bbdaf7;background:linear-gradient(180deg,#79bbff 5%,#378de5);background-color:#79bbff;border-radius:6px;border:1px solid #84bbf3;display:inline-block;cursor:pointer;color:#fff;font-size:15px;padding:10px 20px;text-decoration:none;text-shadow:0 1px 0 #528ecc}.button:hover{background:linear-gradient(180deg,#378de5 5%,#79bbff);background-color:#378de5}.button:active{position:relative;top:2px}.button:disabled,input[type=button]:disabled,input[type=submit]:disabled{background:#ddd;cursor:not-allowed}.button:disabled:hover{background:#ddd}.button:disabled:active{top:0}.link{border:0;color:#000;text-shadow:none;box-shadow:none;text-decoration:underline}.link,.link:active,.link:hover{background:0 0}fieldset,form{margin-bottom:6pt}fieldset{border-radius:6pt}fieldset div{display:flex;vertical-align:bottom;margin-top:.2em;margin-bottom:.2em}fieldset label{margin-left:.5em;width:6em}fieldset input[type=datetime-local],fieldset input[type=number],fieldset input[type=text],fieldset meter,fieldset output,fieldset select{width:5em;flex-grow:1}#code{font-size:150%}fieldset #battery{flex-grow:1;margin-left:.5em}summary{font-size:small;cursor:pointer}summary:after{content:"..."}.version,footer div{font-size:small;color:#777}footer{margin-top:1em}footer div{color:#333;text-align:center}footer a{color:#777;text-decoration:none}.link:active,.link:hover,footer a:active,footer a:hover{text-decoration:underline}.disconnected{display:block}.connected,.connected-valid,.device-connected .disconnected{display:none}.device-connected .connected,.device-connected.config-valid .connected-valid,.incomplete{display:block}.complete,.completed .incomplete,.hidden,body.nolog .log-span,body.nologclear .log-clear-span{display:none}.completed .complete,body.allow-scan .scan-controls{display:block}#duration_days,#duration_hours,#duration_minutes,#duration_seconds,.scan-controls{text-align:right}.scan-controls{margin-left:10px;display:none}.scan-controls #start-scan{display:inline}.scan-controls #stop-scan,body.scanning .scan-controls #start-scan{display:none}body.scanning .scan-controls #stop-scan{display:inline}#interactive.viewport{position:relative;height:0;transition:height .5s ease-out}body.scanning #interactive.viewport{height:480px}#interactive.viewport>canvas,#interactive.viewport>video{max-width:100%;width:100%}canvas.drawing,canvas.drawingBuffer{position:absolute;left:0;top:0}</style><link rel="manifest" href="manifest.webmanifest"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="AX Config"><meta name="apple-mobile-web-app-title" content="AX Config"><meta name="msapplication-starturl" content="/"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><script __not__type="module">parcelRequire=function(e,t,n,r){var o,i="function"==typeof parcelRequire&&parcelRequire,a="function"==typeof require&&require;function s(n,r){if(!t[n]){if(!e[n]){var o="function"==typeof parcelRequire&&parcelRequire;if(!r&&o)return o(n,!0);if(i)return i(n,!0);if(a&&"string"==typeof n)return a(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}l.resolve=function(t){return e[n][1][t]||t},l.cache={};var u=t[n]=new s.Module(n);e[n][0].call(u.exports,l,u,u.exports,this)}return t[n].exports;function l(e){return s(l.resolve(e))}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=t,s.parent=i,s.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]};for(var c=0;c<n.length;c++)try{s(n[c])}catch(e){o||(o=e)}if(n.length){var u=s(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define(function(){return u})}if(parcelRequire=s,o)throw o;return s}({x7XL:[function(e,t,n){"use strict";function r(e){if("object"!=typeof e)return null;const t=60*(new Date).getTimezoneOffset()*1e3;return new Date(e.getTime()-t)}Object.defineProperty(n,"__esModule",{value:!0}),n.sleep=async function(e){return new Promise(t=>setTimeout(t,e))},n.localTime=r,n.localTimeString=function(e,t){const n=r(e);if(null===n)return null;const o=n.toISOString().slice(0,-1);return"d"==t?o.slice(0,-13):"m"==t?o.slice(0,-7):"s"==t?o.slice(0,-4):"S"==t?o.slice(0,-4).replace("T"," "):o},n.localTimeValue=function(e){if("string"!=typeof e||0===e.length)return null;16==e.length&&(e+=":00"),19==e.length&&(e+=".000"),23==e.length&&(e+="Z");const t=60*(new Date).getTimezoneOffset()*1e3;return new Date(new Date(e).getTime()+t)},n.watchParameters=function(e){function t(){const t=new URL(window.location.href),n=t.searchParams,r=new URLSearchParams(t.hash.replace(/^#/,"")),o=[];for(let e of[n,r])for(let t of e.entries())o.push(t);const i={};for(let e of o)i[e[0].toLowerCase()]=e[1];e(i,o)}window.onhashchange=t,t()},n.redirectConsole=function(e,t="P"){function n(e,n,...r){const o=document.querySelector(e),i=r.join(" ");if(!o)return"[pre-DOM] "+i;const a=document.createTextNode(i),s=document.createElement(t);return s.appendChild(a),o.appendChild(s),s.scrollIntoView(!1),i}for(let t of["log","warn","error"]){const r=console[t];console[t]=function(){const o=n(e,t,...arguments);r(o)}}},n.download=function(e,t,n){n=n||"application/octet-binary";const r=document.createElement("A");let o;(t instanceof ArrayBuffer||"string"==typeof t)&&(t=[t]),Array.isArray(t)&&(t=new Blob(t,{type:n})),o=t instanceof Blob?URL.createObjectURL(t):"data:"+n+","+encodeURIComponent(t),r.setAttribute("href",o),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{}],yzmp:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=class{constructor(e){this.inputSelector=e,this.inputBuffer="",this.timeoutId=null,this.autoSubmit=!1}setAutoSubmit(e){this.autoSubmit=e}start(e=null,t=null){this.changeCallback=e,document.onkeydown=this.keydown.bind(this);const n=()=>{const t=document.querySelector(this.inputSelector);if(e){const n=t.value;e(n)}},r=document.querySelector(this.inputSelector);r.addEventListener("input",n),r.addEventListener("change",n),r.addEventListener("focus",function(){this.select()}),r.form.onsubmit=e=>{const n=document.querySelector(this.inputSelector);if(e.preventDefault(),n.blur(),!n.form.querySelector("input[type=submit]").disabled&&t){const e=n.value;t(e)}return!1},n()}setValue(e,t=!1){this.inputBuffer="";const n=document.querySelector(this.inputSelector);if(n){if(arguments.length>0&&(console.log("KEYINPUT: "+e),n.value=e),n.dispatchEvent(new Event("change",{bubbles:!0})),t){const e=n.form.querySelector('input[type="submit"]');e&&e.click()}}else console.log("KEYINPUT: Error: element not found: "+this.inputSelector)}submitEnabled(e){document.querySelector(this.inputSelector).form.querySelector("input[type=submit]").disabled=!e}keydown(e){let t=!0;e=e||window.event,this.inputSelector||(t=!1),document.activeElement&&("INPUT"==document.activeElement.tagName&&["text","password","date","email","number","search"].indexOf(document.activeElement.type)>=0&&(t=!1),"TEXTAREA"==document.activeElement.tagName&&(t=!1)),(e.altKey||e.ctrlKey)&&(t=!1),e.which<32&&(this.inputBuffer.length>0&&13==e.which&&(e.preventDefault(),this.setValue(this.inputBuffer,this.autoSubmit)),t=!1),e.key&&1==e.key.length||(t=!1),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),t?(e.preventDefault(),this.inputBuffer+=e.key,this.timeoutId=setTimeout(function(){this.inputBuffer=""}.bind(this),2e3)):this.inputBuffer=""}}},{}],anNG:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r=new TextEncoder("windows-1252"),o=new TextDecoder("windows-1252"),i=2,a=10;function s(e){let t=null,n=null;for(let r of e.interfaces)r.alternates[0].interfaceClass==i?t=r.interfaceNumber:r.alternates[0].interfaceClass==a&&(n=r.interfaceNumber);if(null===t)return console.log("WARNING: CDC control interface not found in configuration "+e.configurationValue),null;null===n&&(console.log("NOTE: CDC data interface not found in configuration "+e.configurationValue+" -- will continue and assume malformed CDC using a single interface"),n=t);let r=null;for(let n of e.interfaces[t].alternates[0].endpoints)"in"===n.direction&&"interrupt"===n.type&&(r=n.endpointNumber);if(null===r)return console.log("WARNING: CDC control endpoint not found in configuration "+e.configurationValue),null;let o=null,s=null;for(let i of e.interfaces[n].alternates[0].endpoints)n==t&&i.endpointNumber==r||("in"===i.direction&&"bulk"===i.type?o=i.endpointNumber:"out"===i.direction&&"bulk"===i.type?s=i.endpointNumber:console.log("NOTE: Data endpoint ignored "+i.endpointNumber));return null===o||null===s?(console.log("WARNING: CDC data read/write endpoints not found in configuration "+e.configurationValue),null):{configurationValue:e.configurationValue,control:{interface:t,endpoint:r},data:{interface:n,endpointRead:o,endpointWrite:s}}}function c(e){let t=null;for(let n of e.interfaces)255==n.alternates[0].interfaceClass&&(console.log(JSON.stringify({interfaceClass:n.alternates[0].interfaceClass,interfaceSubclass:n.alternates[0].interfaceSubclass,interfaceProtocol:n.alternates[0].interfaceProtocol,interfaceName:n.alternates[0].interfaceName})),t=n.interfaceNumber);if(null===t)return null;let n=null,r=null;for(let o of e.interfaces[t].alternates[0].endpoints)"in"===o.direction&&"bulk"===o.type&&(n=o.endpointNumber),"out"===o.direction&&"bulk"===o.type&&(r=o.endpointNumber);return null===n||null===r?(console.log("WARNING: Generic data read/write endpoints not found in configuration "+e.configurationValue),null):{configurationValue:e.configurationValue,data:{interface:t,endpointRead:n,endpointWrite:r}}}n.default=class{constructor(e){this.device=e,this.type="usb",this.productName=this.device.productName,this.manufacturerName=this.device.manufacturerName,this.serialNumber=this.device.serialNumber,this.io=null}async open(){try{await this.device.open()}catch(e){throw console.log("ERROR: Problem opening device: "+e,e.name+" -- "+e.message),"file:"==location.protocol&&console.log("NOTE: Hosting from a file: protocol may cause this. Try serving over HTTP."),"SecurityError"==e.name&&navigator.appVersion.indexOf("(Windows")>=0&&console.log('NOTE: The "new" Windows WebUSB back-end may have this issue.'),e}console.log("Determine I/O..."),this.io=null;for(let e of this.device.configurations){if(this.io=c(e),null!==this.io)break;if(this.io=s(e),null!==this.io)break}if(null===this.io)throw console.log("ERROR: No matching configuration found."),"No matching configuration found";console.log("IO FOUND, selecting configuration: "+JSON.stringify(this.io));try{await this.device.selectConfiguration(this.io.configurationValue)}catch(e){throw console.log("ERROR: Problem selecting configuration: "+this.io.configurationValue+" -- "+e),e}console.log("...claiming interfaces...");try{await this.device.claimInterface(this.io.data.interface)}catch(e){throw console.log("ERROR: Problem claiming data interface (could it already be claimed by a driver?): "+this.io.data.interface+" -- "+e),"Could not claim interface (could it already be claimed by a driver?): "+this.io.data.interface+" -- "+e}console.log("...USB opened")}async close(){try{await this.device.releaseInterface(this.io.data.interface)}catch(e){console.log("WARNING: Problem releasing data interface: "+this.io.data.interface+" -- "+e)}finally{try{return console.log("...close..."),await this.device.close(),console.log("...closed"),!0}catch(e){return console.log("WARNING: Problem closing device -- "+e),!1}}}async write(e){e.trim().length>0&&(e=("\r"+e.trim()+"\r").padEnd(64,"\r")),console.log("SEND: "+e.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/ /g,"☐"));let t=r.encode(e);console.log("===: "+t);try{await this.device.transferOut(this.io.data.endpointWrite,t)}catch(e){throw console.log("WARNING: Problem writing data: "+this.io.data.endpointWrite+" -- "+t+" -- "+e),e}}async read(){console.log("Read...");let e=null;try{console.log(`...transferIn(${this.io.data.endpointRead})`);let t=await this.device.transferIn(this.io.data.endpointRead,64);if(console.log(`...transferIn() - done (${t.status}): `+t),"stall"===t.status&&(console.log("Endpoint stalled. Clearing."),await this.device.clearHalt("in",this.io.data.endpointRead)),"ok"===t.status)if(t.data&&t.data.byteLength>0){let n=[];for(let e=0;e<t.data.byteLength;e++){let r=t.data.getUint8(e);(r>=128||r<32&&13!=r&&10!=r)&&(t.data.setUint8(e,32),n.push(r))}n.length>0&&console.log(`NOTE: Replaced ${n.length} of ${t.data.byteLength} bytes: ${JSON.stringify(n)}`),e=o.decode(t.data)}else console.log("WARNING: Transfer was ok but no data: "+t.data.byteLength);else console.log("WARNING: Transfer result: "+t.status)}catch(e){return console.log("WARNING: Problem reading data: "+this.io.data.endpointRead+" -- "+e),null}return console.log("RECV: "+(null===e?"<null>":e.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/ /g,"☐"))),e}async cancelRead(){try{return console.log("cancelRead() - "+this.io.data.endpointRead),await this.device.clearHalt("in",this.io.data.endpointRead),console.log("cancelRead() - done"),!0}catch(e){return console.log("WARNING: Problem cancelling read: "+this.io.data.endpointRead+" -- "+e),!1}}isBusy(){return this.device.opened}}},{}],Lo8Z:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e("./util.mjs");n.default=class{constructor(e){console.dir(e),this.port=e,this.type="serial",console.log("PORT: "+JSON.stringify(this.port)),console.log("PORT properties: "+JSON.stringify(Object.getOwnPropertyNames(this.port))),this.portInfo={},this.port.getInfo?this.portInfo=this.port.getInfo():console.log("WARNING: No .portInfo()"),console.log("PORT INFO: "+JSON.stringify(this.portInfo)),this.productName=this.portInfo.product,this.manufacturerName=this.portInfo.manufacturer,this.serialNumber=this.portInfo.serialNumber,this.openFlag=!1,this.unopenable=!1,this.buffer=[]}internalStartRead(){try{this.reader.read().then(this.internalRead.bind(this))}catch(e){console.log("ERROR: Problem in reader while starting read -- reader may be broken now: "+e)}}internalRead({done:e,value:t}){try{if(console.log("*** "+JSON.stringify({value:t,done:e})),null!=t&&t.length>0&&(console.log("<<< ["+this.buffer.length+"] "+t),this.buffer.push(t)),e)return console.log("READER: Stream end"),this.reader.releaseLock(),void(this.reader=null)}catch(e){console.log("ERROR: Problem in reader while completing read -- reader may be broken now: "+e)}setTimeout(this.internalStartRead.bind(this),0)}async open(){try{if(this.openFlag)throw"Port already open";const e={baudrate:9600};await this.port.open(e),this.encoder=new TextEncoderStream,this.outputDone=this.encoder.readable.pipeTo(this.port.writable),this.outputStream=this.encoder.writable,this.writer=null,this.decoder=new TextDecoderStream,this.inputDone=this.port.readable.pipeTo(this.decoder.writable),this.inputStream=this.decoder.readable,this.reader=this.inputStream.getReader(),this.internalStartRead(),this.openFlag=!0,this.unopenable=!1}catch(e){throw this.unopenable=!0,console.log("ERROR: Problem opening serial device: "+e,e.name+" -- "+e.message),e}console.log("...serial opened")}async close(){try{console.log("CLOSE: reader="+(this.reader?JSON.stringify(this.reader):"n/a"));try{this.reader&&await this.reader.cancel()}catch(e){console.log("ERROR: Problem cancelling reader: "+e)}try{await this.inputDone.catch(()=>{})}catch(e){console.log("ERROR: Problem waiting for inputDone: "+e)}this.port.readable.locked&&(console.log("!!! UNEXPECTED: Port readable was still locked -- expected to be released when stream flagged done."),this.reader&&this.reader.releaseLock()),this.reader=null;try{await this.outputStream.getWriter().close(),this.outputStream=null}catch(e){console.log("ERROR: Problem closing writer: "+e)}try{await this.outputDone,this.outputDone=null}catch(e){console.log("ERROR: Problem waiting for outputDone: "+e)}}catch(e){console.log("WARNING: Problem cancelling/unlocking: "+e)}finally{try{return console.log("...close..."),this.port.writable.locked&&console.error("WARNING: Port writable is still locked (will not close)."),await this.port.close(),console.log("...closed"),this.openFlag=!1,!0}catch(e){return console.log("WARNING: Problem closing port -- "+e),!1}}}async write(e){e.trim().length>0&&(e=("\r"+e.trim()+"\r").padEnd(64,"\r")),console.log("SEND: "+e.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/ /g,"☐"));try{this.writer&&console.log("UNEXPECTED: Writer already exists"),this.writer=this.outputStream.getWriter(),await this.writer.write(e)}catch(e){throw console.log("WARNING: Problem writing data: "+e),e}finally{if(this.writer){try{this.writer.releaseLock()}catch(e){console.log("WARNING: "+e)}this.writer=null}}}async read(){console.log("Read... "+this.buffer.length);let e=null;try{for(;this.buffer.length>0;)null===e&&(e=""),e+=this.buffer.shift()}catch(e){return console.log("WARNING: Problem reading serial data: "+e),null}return console.log("RECV: "+(null===e?"<null>":e.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/ /g,"☐"))),e}async cancelRead(){}isBusy(){return!1}}},{"./util.mjs":"x7XL"}],sLgq:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./util.mjs");class o{constructor(e,t,n){this.output=e,this.prefix=t,this.timeout=n}isTerminal(e){return!(!this.prefix&&""!==this.prefix||!e.startsWith(this.prefix))}}class i{constructor(e){this.started=(new Date).getTime(),this.command=e,this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.lines=[],this.completed=!1,this.error=null}addResponse(e){this.lines.push(e);const t=this.command.isTerminal(e);return console.log(`...now have ${this.lines.length} line(s) (terminal=${t})`),!!t}lastLine(){return this.completed&&this.lines.length>0?this.lines[this.lines.length-1]:null}complete(e=null){null!=e?(console.log("COMMAND-REJECT: "+e),this.error=e,this.reject(this)):(console.log("COMMAND-RESOLVE"),this.completed=!0,this.resolve(this))}checkTimeout(){const e=(new Date).getTime()-this.started;return!(this.completed||this.error||!this.command.timeout||!(e>=this.command.timeout))}}class a{constructor(e){if(this.device=e,console.log("--- COMMS ---"),console.log(this.device.productName),console.log(this.device.manufacturerName),console.log(this.device.serialNumber),this.serial=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("AX")&&!e.startsWith("CWA"))return null;for(let t=e.length-1;;t--)if(t<0||!(e.charCodeAt(t)>=48&&e.charCodeAt(t)<=57))return t+1>=e.length?null:parseInt(e.substring(t+1))}(this.device.serialNumber),console.log("SERIAL: "+this.serial),this.deviceType=null,this.device.serialNumber){const e=this.device.serialNumber.trim();e.startsWith("CWA")?this.deviceType="AX3":e.startsWith("AX")&&(this.deviceType=e.substring(0,3))}this.hasGyro="AX6"===this.deviceType,this.commandQueue=[],this.currentCommand=null,this.currentTimeout=null,this.rejectRead=null,this.nextTick=null,this.receiveBuffer="",this.statusHandler=null,this.status={id:{deviceId:null},battery:{percent:null,time:null},start:null,stop:null,state:null,errorState:null},this.recalculateRecordingStatus()}setStatusHandler(e){this.statusHandler=e}statusChanged(){this.statusHandler&&this.statusHandler(this,this.status)}updateState(e,t){console.log("STATE: "+e+" / "+t),this.status.state=e,this.status.errorState=t,this.statusChanged()}async exec(e){console.log(`exec() command=${e.output.replace(/[\r\n]/g,"|")} commandQueue.length=${this.commandQueue.length} currentCommand=${this.currentCommand} nextTick=${this.nextTick}`);const t=new i(e);return this.commandQueue.push(t),null==this.currentCommand&&null==this.nextTick&&(console.log("exec(): bootstrap"),this.nextTick=setTimeout(async()=>{console.log("exec(): bootstrap..."),await this.execNext(),console.log("exec(): bootstrap... done")},0)),console.log("exec(): return"),t.promise}async execNext(){try{if(this.nextTick=!0,console.log("execNext()"),null==this.currentCommand){if(console.log("execNext(): no command..."),this.commandQueue.length<=0)return console.log("execNext(): no more commands"),void(this.nextTick=null);console.log("execNext(): getting next command..."),this.currentCommand=this.commandQueue.shift(),this.currentCommand.command.timeout?(console.log("execNext(): setting up new timeout: "+this.currentCommand.command.timeout),this.currentTimeout=setTimeout(this.timeout.bind(this),this.currentCommand.command.timeout)):console.log("execNext(): command has no timeout");try{console.log("execNext(): write: "+this.currentCommand.command.output.replace(/[\r\n]/g,"|")),await this.write(this.currentCommand.command.output),console.log("execNext(): write: (done)")}catch(e){console.log("execNext(): write: exception: "+e),this.commandComplete(e)}}if(this.currentCommand){let e=null;try{this.currentCommand&&this.currentCommand.checkTimeout()?(console.log("execNext(): timeout before read"),this.commandComplete("Timeout before read")):(console.log("execNext(): read"),e=await this.read())}catch(e){console.log("execNext(): read exception: "+e),this.commandComplete(e)}if(null===e&&"serial"===this.device.type&&null===e&&(await this.write("\r"),await(0,r.sleep)(100)),this.currentCommand&&null!==e)for(console.log("execNext(): adding data "+e.length),this.receiveBuffer+=e;;){const e=this.receiveBuffer.indexOf("\n");if(e<0)break;const t=this.receiveBuffer.slice(0,e).trim();if(console.log("LINE: "+t),this.receiveBuffer=this.receiveBuffer.slice(e+1),this.currentCommand.addResponse(t)){console.log("execNext(): end"),this.commandComplete();break}}else console.log("execNext(): (no command or no data) ")}}catch(e){console.log("execNext(): Exception during processing: "+e)}this.nextTick=setTimeout(async()=>{console.log("execNext(): ..."),await this.execNext(),console.log("execNext(): ... done")},0),console.log("execNext(): end")}async timeout(){try{console.log("timeout(): ..."),this.currentTimeout=null,this.rejectRead&&(console.log("timeout(): ...reject read..."),this.rejectRead(null)),this.currentCommand?(console.log("timeout(): ...cancel read..."),await this.device.cancelRead(),this.commandComplete("Timeout")):console.log("timeout(): no current command"),console.log("timeout(): ...done")}catch(e){console.log("timeout(): ERROR: "+e)}}commandComplete(e=null){if(null!==e?console.log("commandComplete(): FAILED "+e+" -- "+(this.currentCommand?this.currentCommand.command.output:"-")):console.log("commandComplete(): SUCCESS -- "+(this.currentCommand?this.currentCommand.command.output:"-")),this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.currentCommand){const t=this.currentCommand;this.currentCommand=null,t.complete(e)}}async open(){this.receiveBuffer="",await this.device.open(),console.log("...opened")}async close(){return await this.device.close()}async write(e){await this.device.write(e)}async read(){const e=new Promise((e,t)=>{this.rejectRead=t});return Promise.race([e,this.device.read()])}parseDateTime(e){if("0"==e)return 0;if("-1"==e)return-1;const t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(5,7),10),r=parseInt(e.substring(8,10),10),o=parseInt(e.substring(11,13),10),i=parseInt(e.substring(14,16),10),a=parseInt(e.substring(17,19),10),s=new Date(t,n-1,r,o,i,a,0);return s.getFullYear()<2e3?0:s.getFullYear()>=2064?-1:s}packDateTime(e=null){if(null===e&&(e=new Date),0==e)return"0";if(-1==e)return"-1";let t=e.getFullYear()+"/";return(t=(t=(t=(t=t+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/")+(e.getDate()<10?"0":"")+e.getDate()+",")+(e.getHours()<10?"0":"")+e.getHours()+":")+(e.getMinutes()<10?"0":"")+e.getMinutes()+":")+(e.getSeconds()<10?"0":"")+e.getSeconds()}async getConfigOptions(){return{accelRate:[6.25,12.5,25,50,100,200,400,800,1600,3200],accelRange:[2,4,8,16]}}async getId(){const e=new o("\r\nID\r\n","ID=",2e3);console.log(">>> "+e.output);const t=(await this.exec(e)).lastLine();console.log("<<< "+t);const n=t.substring(t.indexOf("=")+1).split(",");return this.hasGyro="AX6"===n[0],{deviceType:"CWA"==n[0]?"AX3":n[0],deviceId:parseInt(n[3],10),firmwareVersion:parseInt(n[2],10)}}async getBattery(){const e=new o("\r\nSAMPLE 1\r\n","$BATT=",2e3);console.log(">>> "+e.output);const t=(await this.exec(e)).lastLine();console.log("<<< "+t);const n=t.substring(t.indexOf("=")+1).split(",").map(e=>parseInt(e,10));return{voltage:n[1]/1e3,percent:n[3],charging:n[4],time:new Date}}async setLed(e){const t=new o(`\r\nLED ${e}\r\n`,"LED=",2e3);console.log(">>> "+t.output);const n=(await this.exec(t)).lastLine();console.log("<<< "+n);const r=n.substring(n.indexOf("=")+1).split(",").map(e=>parseInt(e,10));if(r[0]!=e)throw`LED value unexpected: was ${r[0]}, expected ${e}`}async setTime(e=null){this.updateState("Configuring: Setting time");let t=e;null===t&&(t=new Date);const n=this.packDateTime(t),r=new o(`\r\nTIME ${n}\r\n`,"$TIME=",2e3);console.log(">>> "+r.output);const i=(await this.exec(r)).lastLine();console.log("<<< "+i);const a=this.parseDateTime(i.substring(i.indexOf("=")+1)),s=a.getTime()-t.getTime();if(Math.abs(s)>2e3)throw`Time value difference too large: received ${a.toISOString()}, expected closer to ${t.toISOString()}`}async setSession(e){const t=parseInt(e);if(this.updateState("Configuring: Setting session ID"),"number"!=typeof t||isNaN(t)||t<0||t>2147483647)throw"Session ID invalid value";const n=new o(`\r\nSESSION ${t}\r\n`,"SESSION=",2e3);console.log(">>> "+n.output);const r=(await this.exec(n)).lastLine();console.log("<<< "+r);const i=r.substring(r.indexOf("=")+1).split(",").map(e=>parseInt(e,10));if(i[0]!=t)throw`SESSION value unexpected: was ${i[0]}, expected ${t}`}async setMaxSamples(e){this.updateState("Configuring: Setting max. samples");const t=new o(`\r\nMAXSAMPLES ${e}\r\n`,"MAXSAMPLES=",2e3);console.log(">>> "+t.output);const n=(await this.exec(t)).lastLine();console.log("<<< "+n);const r=n.substring(n.indexOf("=")+1).split(",").map(e=>parseInt(e,10));if(r[0]!=e)throw`MAXSAMPLES value unexpected: was ${r[0]}, expected ${e}`}async getHibernate(e){const t=new o("\r\nHIBERNATE\r\n","HIBERNATE=",2e3);console.log(">>> "+t.output);const n=(await this.exec(t)).lastLine();console.log("<<< "+n);const r=n.substring(n.indexOf("=")+1);return this.parseDateTime(r)}async setHibernate(e){this.updateState("Configuring: Setting start");const t=this.packDateTime(e),n=new o(`\r\nHIBERNATE ${t}\r\n`,"HIBERNATE=",2e3);console.log(">>> "+n.output);const r=(await this.exec(n)).lastLine();console.log("<<< "+r);const i=r.substring(r.indexOf("=")+1);if(t!=i)throw`HIBERNATE value unexpected: was ${i}, expected ${t}`}async getStop(e){const t=new o("\r\nSTOP\r\n","STOP=",2e3);console.log(">>> "+t.output);const n=(await this.exec(t)).lastLine();console.log("<<< "+n);const r=n.substring(n.indexOf("=")+1);return this.parseDateTime(r)}async setStop(e){this.updateState("Configuring: Setting stop");const t=this.packDateTime(e),n=new o(`\r\nSTOP ${t}\r\n`,"STOP=",2e3);console.log(">>> "+n.output);const r=(await this.exec(n)).lastLine();console.log("<<< "+r);const i=r.substring(r.indexOf("=")+1);if(i.indexOf(t)<0)throw`STOP value unexpected: was ${i}, expected ${t}`}async setRate(e,t,n){this.updateState("Configuring: Setting rate");let r=0;switch(parseFloat(e)){case 3200:r|=15;break;case 1600:r|=14;break;case 800:r|=13;break;case 400:r|=12;break;case 200:r|=11;break;case 100:r|=10;break;case 50:r|=9;break;case 25:r|=8;break;case 12.5:case 12:r|=7;break;case 6.25:case 6:r|=6;break;default:throw"Invalid accelerometer frequency."}if(this.hasGyro&&parseFloat(e)>1600)throw"This device has a maximum rate of 1600Hz";if(this.hasGyro&&parseFloat(e)<25)throw"This device has a minimum rate of 25Hz";switch(parseInt(t)){case 16:r|=0;break;case 8:r|=64;break;case 4:r|=128;break;case 2:r|=192;break;default:throw"Invalid accelerometer sensitivity."}let i=null;if(n){if(!this.hasGyro)throw"Cannot configure gyroscope on device without gyroscope.";switch(parseInt(n)){case 2e3:case 1e3:case 500:case 250:i=parseInt(n);break;default:throw"Invalid gyro range: "+parseInt(n)}}const a=new o(i?`\r\nRATE ${r},${i}\r\n`:`\r\nRATE ${r}\r\n`,"RATE=",2e3);console.log(">>> "+a.output);const s=(await this.exec(a)).lastLine();console.log("<<< "+s);const c=s.substring(s.indexOf("=")+1).split(",").map(e=>parseInt(e,10));if(c[0]!=r)throw`RATE value unexpected: was ${c[0]}, expected ${r}`;if(c[1]!=e)throw`RATE frequency unexpected: was ${c[1]}, expected ${e}`;if(i&&c[2]!=i)throw`RATE gyro range unexpected: was ${c[2]}, expected ${i}`}async setDebug(e){let t=!0===e?3:+e;this.updateState("Configuring: Setting flash status");const n=new o(`\rDEBUG ${t}\r\n`,"DEBUG=",2e3);console.log(">>> "+n.output);const r=(await this.exec(n)).lastLine();console.log("<<< "+r);const i=r.substring(r.indexOf("=")+1).split(",").map(e=>parseInt(e,10));if(i[0]!=t)throw`DEBUG value unexpected: was ${i[0]}, expected ${t}`}async readSector(e){const t=new o(`\r\nREADL ${e}\r\n`,"OK",1e4);console.log(">>> "+t.output);const n=await this.exec(t),r=new DataView(new ArrayBuffer(512),0);let i=0;for(let e of n.lines){if(e.startsWith("READL="))continue;if(e.startsWith("OK"))continue;const t=e.split(":",1),n=parseInt(t,16);if(n!=i)throw`Unexpected sector offset ${n}, expected ${i}`;const o=e.trim().slice(t.length+1,-16).replace(/\ /g,""),a=o.length/2;if(16!=a)throw`Unexpected sector line length ${o.length} -> ${a}, expected 32 -> 16`;for(let e=0;e<a;e++){const t=parseInt(o.slice(2*e,2*e+2),16);r.setUint8(t),i++}}if(512!=i)throw`Unexpected sector size ${i}, expected 512`;return r}async readFilesystem(){this.updateState("Reading filesystem");const e={};e.mbrSector=await this.readSector(0),e.firstSectorNumber=e.mbrSector.getUint32(454,!0),e.bootSector=await this.readSector(e.firstSectorNumber),e.sectorsPerCluster=e.bootSector.getUint16(12,!0),e.numReservedSectors=e.bootSector.getUint16(14,!0),e.numFATs=e.bootSector.getUint8(16),e.numRootDirectoryEntries=e.bootSector.getUint16(17,!0),e.sectorsPerFAT=e.bootSector.getUint16(22,!0),e.rootSectorNumber=e.firstSectorNumber+e.numReservedSectors+e.numFATs*e.sectorsPerFAT,e.rootSector=await this.readSector(e.rootSectorNumber),e.firstSectorOfFileArea=e.rootSectorNumber+Math.floor(32*e.numRootDirectoryEntries/512),e.dataLength=null;for(let t=0;t<16;t++){const n=32*t,r="CWA-DATACWA";let o=!0;for(let t=0;t<r.length;t++)if(e.rootSector.getUint8(n+t)!=r.charCodeAt(t)){o=!1;break}if(o){e.dataLength=e.rootSector.getUint32(n+28,!0);break}}return{firstSectorNumber:firstSectorNumber,sectorsPerCluster:sectorsPerCluster,numReservedSectors:numReservedSectors,numFATs:numFATs,numRootDirectoryEntries:numRootDirectoryEntries,sectorsPerFAT:sectorsPerFAT,rootSectorNumber:rootSectorNumber,firstSectorOfFileArea:firstSectorOfFileArea,dataLength:dataLength}}async setMetadata(e){for(let t=0;t<14;t++){this.updateState(`Configuring: Setting metadata (${t+1} / 14)`);let n="";const r=32*t;let i=32*(t+1);r<e.length&&(i>e.length&&(i=e.length),n=e.substring(r,i));const a="Annotate"+(t<10?"0":"")+t+"="+n+"\r\n",s="ANNOTATE"+(t<10?"0":"")+t+"=";await this.tryAndRetry(async()=>{const e=new o(`\r\n${a}\r\n`,s,1e3);console.log(">>> "+e.output+"|");const t=(await this.exec(e)).lastLine();console.log("<<< "+t);const r=t.substring(t.indexOf("=")+1);if(r.trim()!=n.trim())throw`${s} unexpected value, received "${r.trim()}", expected "${n.trim()}"`})}}async commit(e){let t;if(!0===e)this.updateState("Configuring: Wiping and committing"),t=new o("\r\nFORMAT WC\r\n","COMMIT",1e4);else if(!1===e)this.updateState("Configuring: Erasing and committing"),t=new o("\r\nFORMAT QC\r\n","COMMIT",8e3);else{if(null!==e)throw"ERROR: Unknown commit type.";this.updateState("Configuring: Committing"),t=new o("\r\nCommit\r\n","COMMIT",5e3)}console.log(">>> "+t.output);const n=(await this.exec(t)).lastLine();console.log("<<< "+n)}async tryAndRetry(e,t=3,n=1e3){let o="Unexpected failure in retry logic.";for(let i=0;i<t;i++)try{return n&&i>0&&(console.log(`Retrying in ${n/1e3}s...`),await(0,r.sleep)(n)),await e()}catch(e){o=e,console.log(`WARNING: Failed attempt (${i+1}/${t}): `+(e.error?e.error:e))}throw o}async updateStatus(){if(this.device.isBusy())throw this.updateState(null,"Device busy"),"ERROR: Device is busy";try{if(this.updateState("Querying status"),await this.tryAndRetry(()=>this.open()),null===this.status.id||null===this.status.id.deviceId){if(this.status.id=await this.tryAndRetry(()=>this.getId()),this.status.id.deviceId!=this.serial){if(null!==this.serial||"serial"!==this.device.type)throw`ERROR: Device id mismatch: reported ID=${this.status.id.deviceId} but serial number was ${this.serial}.`;console.log(`WARNING: Serial API did not return serial number, so not verifying reported: ID=${this.status.id.deviceId}`)}console.log("ID="+JSON.stringify(this.status.id))}const e=new Date;return(null===this.status.battery||null===this.status.battery.percent||null===this.status.battery.time||e.getTime()-this.status.battery.time.getTime()>=3e4)&&(this.status.battery=await this.tryAndRetry(()=>this.getBattery()),console.log("BATTERY="+JSON.stringify(this.status.battery))),null===this.status.start&&(this.status.start=await this.tryAndRetry(()=>this.getHibernate())),null===this.status.stop&&(this.status.stop=await this.tryAndRetry(()=>this.getStop())),this.recalculateRecordingStatus(),this.status}catch(e){throw e.error?(this.updateState(null,`Error getting status: ${e.error}`),console.log("ERROR: Problem during status update: "+e.error)):(this.updateState(null,`Error getting status: ${e}`),console.log("ERROR: Problem during status update: "+e)),e}finally{await this.close()}}recalculateRecordingStatus(e=!1){const t=Date.UTC(-271821,3,20),n=Date.UTC(275760,8,13),r=new Date;let o=this.status.start;-1===o&&(o=n),0===o&&(o=t);let i=this.status.stop;-1===i&&(o=n),0===i&&(o=t),this.status.recordingConfigured=o<i,this.status.recordingFinished=this.status.recordingConfigured&&r>=i,this.status.recordingStarted=this.status.recordingConfigured&&r>=o&&!this.status.recordingFinished,this.status.recordingIncomplete=this.status.recordingConfigured&&!this.status.recordingFinished;let a=e?"Configured: ":"";this.status.recordingConfigured?this.status.recordingFinished?a+="Recording complete":this.status.recordingStarted?a+="Recording started":a+="Configured":a=e?"Settings cleared":"Ready",this.updateState(a)}async configure(e){if(this.device.isBusy())throw this.updateState(null,"Device busy"),"ERROR: Device is busy";try{this.updateState("Configuring..."),await this.tryAndRetry(()=>this.open());const t={minbattery:null,configLed:a.LED_BLUE,time:null,session:0,maxSamples:0,rate:100,range:8,gyro:0,start:-1,stop:0,metadata:"",led:a.LED_MAGENTA,wipe:!0,noData:!1,debug:!1};for(let n of Object.keys(e))if(!(n in t))throw`ERROR: Unknown configuration value: ${n}`;const n=Object.assign(t,e);if(console.log("ID="+JSON.stringify(this.status.id)),this.status.id.deviceId!=this.serial){if(null!==this.serial||"serial"!==this.device.type)throw`ERROR: Device id mismatch (was status updated first?): reported ID=${this.status.id.deviceId} but USB serial number was ${this.serial}.`;console.log(`WARNING: Serial API did not return serial number, so not verifying reported: ID=${this.status.id.deviceId}`)}if(await this.tryAndRetry(()=>this.setLed(n.configLed)),console.log("BATTERY="+JSON.stringify(this.status.battery)),this.status.battery.percent<n.minbattery)throw`ERROR: Device battery level too low: ${this.status.battery.percent}% (required ${n.minbattery}%).`;if(n.noData){const e=await this.tryAndRetry(()=>this.readFilesystem());if(console.log("FILESYSTEM="+JSON.stringify(e)),e.dataLength&&e.dataLength>1024)throw"ERROR: Device has data on it."}return n.time||(n.time=new Date),await this.tryAndRetry(()=>this.setTime(n.time)),await this.tryAndRetry(()=>this.setRate(n.rate,n.range,n.gyro)),await this.tryAndRetry(()=>this.setSession(n.session)),await this.tryAndRetry(()=>this.setMaxSamples(n.maxSamples)),await this.tryAndRetry(()=>this.setDebug(n.debug?3:0)),await this.tryAndRetry(()=>this.setHibernate(n.start)),await this.tryAndRetry(()=>this.setStop(n.stop)),await this.tryAndRetry(()=>this.setMetadata(n.metadata)),await this.tryAndRetry(()=>this.commit(n.wipe)),this.status.start=n.start,this.status.stop=n.stop,this.recalculateRecordingStatus(!0),await this.tryAndRetry(()=>this.setLed(n.led)),{time:n.time,timeDevice:(0,r.localTimeString)(n.time,"S"),deviceId:this.status.id.deviceId,battery:battery.percent,start:n.start,startDevice:(0,r.localTimeString)(n.start,"S"),stop:n.stop,stopDevice:(0,r.localTimeString)(n.stop,"S"),session:n.session,rate:n.rate,range:n.range,gyro:n.gyro,metadata:n.metadata}}catch(e){throw e.error?(this.updateState(null,`Error: ${e.error}`),console.log("ERROR: Problem during configuration: "+e.error)):(this.updateState(null,`Error: ${e}`),console.log("ERROR: Problem during configuration: "+e)),e}finally{await this.close()}}}n.default=a,a.USB_DEVICE_VID=1240,a.USB_DEVICE_PID=87,a.LED_OFF=0,a.LED_BLUE=1,a.LED_GREEN=2,a.LED_CYAN=3,a.LED_RED=4,a.LED_MAGENTA=5,a.LED_YELLOW=6,a.LED_WHITE=7},{"./util.mjs":"x7XL"}],bqdr:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./usb_device.mjs")),o=a(e("./serial_device.mjs")),i=a(e("./ax3device.mjs"));function a(e){return e&&e.__esModule?e:{default:e}}n.default=class{constructor(e,t){this.enableSerial=t,this.usbDevices={},this.serialDevices={},this.warnings=[],"file:"===location.protocol&&this.warnings.push("WARNING: Features may not work over the file: protocol (try via a web server)."),"https:"!==location.protocol&&this.warnings.push("WARNING: Features require secure HTTPS."),navigator.usb||navigator.serial||this.warnings.push("WARNING: This browser configuration does not support device connection (WebUSB or Web Serial API)."),!(e&&navigator.usb&&navigator.appVersion.indexOf("(Windows")>=0)||t&&navigator.serial||this.warnings.push("WARNING: WebUSB will not work on Windows as standard (CDC devices claimed by the driver). "+(t?" You can try enabling the experimental Web Serial API at: chrome://flags#enable-experimental-web-platform-features and/or see Help for experimental firmware with WinUSB and Generic interface support.":""));for(let e of this.warnings)console.log(e)}async startup(e){return this.changedHandler=e,navigator.usb&&(navigator.usb.addEventListener("disconnect",e=>{const t=e.device;console.log("DEVICEMANAGER: USB Disconnect "+t);const n=this.usbDevices[t];delete this.usbDevices[t],this.changedHandler&&this.changedHandler(n,t,"disconnect")}),navigator.usb.addEventListener("connect",e=>{const t=e.device;console.log("DEVICEMANAGER: USB Connect "+t);const n=new i.default(new r.default(t));this.usbDevices[t]=n,this.changedHandler&&this.changedHandler(n,t,"connect")})),await this.refreshDevices(),!0}async refreshDevices(){if(navigator.serial){const e={};if(navigator.serial.getPorts){let t=[];try{t=await navigator.serial.getPorts()}catch(e){this.firstSerialEnumerateError||(this.firstSerialEnumerateError=!0,console.log("ERROR: Problem enumerating serial devices: "+e+" -- "+JSON.stringify(e)))}for(let n of t)if(e[n]=n,!(n in this.serialDevices)){console.log("DEVICEMANAGER: Serial Enumerate "+n);const e=new i.default(new o.default(n));this.serialDevices[n]=e,this.changedHandler&&this.changedHandler(e,n,"get")}}for(let t of Object.keys(this.serialDevices))if(!(t in e)){console.log("DEVICEMANAGER: Serial Enumerate device lost "+t);const e=this.serialDevices[t];this.changedHandler&&this.changedHandler(e,t,"disconnect"),delete this.serialDevices[t]}}}async userAddUsbDevice(){if(!navigator.usb)throw"ERROR: WebUSB is not supported in this browser configuration.";try{const e=await navigator.usb.requestDevice({filters:[{vendorId:i.default.USB_DEVICE_VID,productId:i.default.USB_DEVICE_PID}]});if(console.log("DEVICEMANAGER: Request USB "+e),!(e in this.usbDevices)){const t=new i.default(new r.default(e));this.usbDevices[e]=t}return this.changedHandler&&this.changedHandler(this.usbDevices[e],e,"request"),!0}catch(e){throw"NotFoundError"==e.name?(console.log("NOTE: User did not select a device: "+e.name+" -- "+e.message),"No device chosen."):(console.log("ERROR: "+e+" -- "+e.name+" -- "+e.message),"ERROR: "+e+" -- "+e.name+" -- "+e.message)}}async userAddSerialDevice(){if(!("serial"in navigator))throw"ERROR: Web Serial API is not supported in this browser configuration.";try{const e={filters:[{usbVendorId:i.default.USB_DEVICE_VID,usbProductId:i.default.USB_DEVICE_PID,vendorId:i.default.USB_DEVICE_VID,productId:i.default.USB_DEVICE_PID}]},t=await navigator.serial.requestPort(e);if(console.log("DEVICEMANAGER: Request serial "+t),!(t in this.serialDevices)){const e=new i.default(new o.default(t));this.serialDevices[t]=e}return this.changedHandler&&this.changedHandler(this.serialDevices[t],t,"request"),!0}catch(e){throw"NotFoundError"==e.name?(console.log("NOTE: User did not select a device: "+e.name+" -- "+e.message),"No device chosen."):(console.log("ERROR: "+e+" -- "+e.name+" -- "+e.message),"ERROR: "+e+" -- "+e.name+" -- "+e.message)}}getSingleDevice(){const e=Object.keys(this.usbDevices).length+Object.keys(this.serialDevices).length;return 1!==e?(console.log("ERROR: DeviceManager has "+e+" device(s) -- this will only work for a single device."),null):Object.keys(this.usbDevices).length>0?Object.values(this.usbDevices)[0]:Object.keys(this.serialDevices).length>0?Object.values(this.serialDevices)[0]:null}}},{"./usb_device.mjs":"anNG","./serial_device.mjs":"Lo8Z","./ax3device.mjs":"sLgq"}],yh9p:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},n.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(d(e,a,a+16383>s?s:a+16383));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(l(r));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],JgNJ:[function(e,t,n){n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=u}return(h?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*g}},{}],REa7:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],dskh:[function(e,t,n){arguments[3];var r=arguments[3],o=e("base64-js"),i=e("ieee754"),a=e("isarray");function s(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function c(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(c()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return d(this,e,t,n)}function d(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,n,r):"string"==typeof t?g(e,t,n):v(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t,n,r){return f(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}function p(e,t){if(f(t),e=u(e,t<0?0:0|b(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function g(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(t,n),o=(e=u(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}function y(e,t){var n=t.length<0?0:0|b(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function m(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=y(e,t),e}function v(e,t){if(l.isBuffer(t)){var n=0|b(t.length);return 0===(e=u(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||ne(t.length)?u(e,0):y(e,t);if("Buffer"===t.type&&a(t.data))return y(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(e){if(e>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),l.alloc(+e)}function w(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ee(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function E(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return U(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function R(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:x(e,t,n,r,o);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,f=0;f<c;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function C(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function A(e,t,n,r){return te(K(t,e.length-n),e,n,r)}function T(e,t,n,r){return te(Q(t),e,n,r)}function O(e,t,n,r){return T(e,t,n,r)}function D(e,t,n,r){return te(ee(t),e,n,r)}function I(e,t,n,r){return te(Z(t,e.length-n),e,n,r)}function N(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return L(r)}n.Buffer=l,n.SlowBuffer=_,n.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:s(),n.kMaxLength=c(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return d(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return h(null,e,t,n)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},l.byteLength=w,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):E.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(r,o),u=e.slice(t,n),d=0;d<s;++d)if(c[d]!==u[d]){i=c[d],a=u[d];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return R(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return R(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return D(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function L(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}function U(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=J(e[i]);return o}function B(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function z(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,n,r,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function W(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function G(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,o){return o||G(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function H(e,t,n,r,o){return o||G(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var o=t-e;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},l.prototype.readUInt8=function(e,t){return t||z(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||z(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||z(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||z(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||z(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||z(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||z(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||q(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||q(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):W(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):W(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);q(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);q(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):W(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):W(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=l.isBuffer(e)?e:K(new l(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var $=/[^+\/0-9A-Za-z-_]/g;function Y(e){if((e=X(e).replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function X(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Z(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}function ee(e){return o.toByteArray(Y(e))}function te(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function ne(e){return e!=e}},{"base64-js":"yh9p",ieee754:"JgNJ",isarray:"REa7",buffer:"dskh"}],g3U2:[function(e,t,n){arguments[3],e("buffer").Buffer,arguments[3],e("buffer").Buffer;!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r(r.toString()).default:"object"==typeof n?n.Quagga=r(r.toString()).default:e.Quagga=r(r.toString()).default}(this,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=166)}([function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";var r=n(3);function o(e,t){return this._row=[],this.config=e||{},this.supplements=t,this}o.prototype._nextUnset=function(e,t){var n;for(void 0===t&&(t=0),n=t;n<e.length;n++)if(!e[n])return n;return e.length},o.prototype._matchPattern=function(e,t,n){var r,o,i,a,s=0,c=0,u=0,l=0;for(n=n||this.SINGLE_CODE_ERROR||1,r=0;r<e.length;r++)u+=e[r],l+=t[r];if(u<l)return Number.MAX_VALUE;for(n*=o=u/l,r=0;r<e.length;r++){if(i=e[r],a=t[r]*o,(c=Math.abs(i-a)/a)>n)return Number.MAX_VALUE;s+=c}return s/l},o.prototype._nextSet=function(e,t){var n;for(n=t=t||0;n<e.length;n++)if(e[n])return n;return e.length},o.prototype._correctBars=function(e,t,n){for(var r=n.length,o=0;r--;)(o=e[n[r]]*(1-(1-t)/2))>1&&(e[n[r]]=o)},o.prototype._matchTrace=function(e,t){var n,r=[],o=this._nextSet(this._row),i=!this._row[o],a=0,s={error:Number.MAX_VALUE,code:-1,start:0};if(e){for(n=0;n<e.length;n++)r.push(0);for(n=o;n<this._row.length;n++)if(this._row[n]^i)r[a]++;else{if(a===r.length-1)return this._matchPattern(r,e)<t?(s.start=n-o,s.end=n,s.counter=r,s):null;r[++a]=1,i=!i}}else for(r.push(0),n=o;n<this._row.length;n++)this._row[n]^i?r[a]++:(a++,r.push(0),r[a]=1,i=!i);return s.start=o,s.end=this._row.length-1,s.counter=r,s},o.prototype.decodePattern=function(e){var t;return this._row=e,null===(t=this._decode())?(this._row.reverse(),(t=this._decode())&&(t.direction=o.DIRECTION.REVERSE,t.start=this._row.length-t.start,t.end=this._row.length-t.end)):t.direction=o.DIRECTION.FORWARD,t&&(t.format=this.FORMAT),t},o.prototype._matchRange=function(e,t,n){var r;for(r=e=e<0?0:e;r<t;r++)if(this._row[r]!==n)return!1;return!0},o.prototype._fillCounters=function(e,t,n){var r,o=0,i=[];for(n=void 0===n||n,e=void 0!==e?e:this._nextUnset(this._row),t=t||this._row.length,i[o]=0,r=e;r<t;r++)this._row[r]^n?i[o]++:(i[++o]=1,n=!n);return i},o.prototype._toCounters=function(e,t){var n,o=t.length,i=this._row.length,a=!this._row[e],s=0;for(r.a.init(t,0),n=e;n<i;n++)if(this._row[n]^a)t[s]++;else{if(++s===o)break;t[s]=1,a=!a}return t},Object.defineProperty(o.prototype,"FORMAT",{value:"unknown",writeable:!1}),o.DIRECTION={FORWARD:1,REVERSE:-1},o.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"},o.CONFIG_KEYS={},t.a=o},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";t.a={init:function(e,t){for(var n=e.length;n--;)e[n]=t},shuffle:function(e){for(var t,n,r=e.length-1;r>=0;r--)t=Math.floor(Math.random()*r),n=e[r],e[r]=e[t],e[t]=n;return e},toPointList:function(e){var t,n,r=[],o=[];for(t=0;t<e.length;t++){for(r=[],n=0;n<e[t].length;n++)r[n]=e[t][n];o[t]="["+r.join(",")+"]"}return"["+o.join(",\r\n")+"]"},threshold:function(e,t,n){var r,o=[];for(r=0;r<e.length;r++)n.apply(e,[e[r]])>=t&&o.push(e[r]);return o},maxIndex:function(e){var t,n=0;for(t=0;t<e.length;t++)e[t]>e[n]&&(n=t);return n},max:function(e){var t,n=0;for(t=0;t<e.length;t++)e[t]>n&&(n=e[t]);return n},sum:function(e){for(var t=e.length,n=0;t--;)n+=e[t];return n}}},function(e,t,n){"use strict";var r=n(28),o=n.n(r),i=n(1),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function s(e,t){var n;e=o()((n={},Object.keys(s.CONFIG_KEYS).forEach(function(e){n[e]=s.CONFIG_KEYS[e].default}),n),e),i.a.call(this,e,t)}s.prototype=Object.create(i.a.prototype,{CODE_L_START:{value:0},CODE_G_START:{value:10},START_PATTERN:{value:[1,1,1]},STOP_PATTERN:{value:[1,1,1]},MIDDLE_PATTERN:{value:[1,1,1,1,1]},EXTENSION_START_PATTERN:{value:[1,1,2]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.7},AVG_CODE_ERROR:{value:.48},FORMAT:{value:"ean_13",writeable:!1}}),s.prototype.constructor=s,s.prototype._decodeCode=function(e,t){var n,r,o,i=[0,0,0,0],a=e,s=!this._row[a],c=0,u={error:Number.MAX_VALUE,code:-1,start:e,end:e};for(t||(t=this.CODE_PATTERN.length),n=a;n<this._row.length;n++)if(this._row[n]^s)i[c]++;else{if(c===i.length-1){for(r=0;r<t;r++)(o=this._matchPattern(i,this.CODE_PATTERN[r]))<u.error&&(u.code=r,u.error=o);return u.end=n,u.error>this.AVG_CODE_ERROR?null:u}i[++c]=1,s=!s}return null},s.prototype._findPattern=function(e,t,n,r,o){var i,a,s,c,u=[],l=0,d={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t||(t=this._nextSet(this._row)),void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=this.AVG_CODE_ERROR),i=0;i<e.length;i++)u[i]=0;for(i=t;i<this._row.length;i++)if(this._row[i]^n)u[l]++;else{if(l===u.length-1){for(c=0,s=0;s<u.length;s++)c+=u[s];if((a=this._matchPattern(u,e))<o)return d.error=a,d.start=i-c,d.end=i,d;if(!r)return null;for(s=0;s<u.length-2;s++)u[s]=u[s+2];u[u.length-2]=0,u[u.length-1]=0,l--}else l++;u[l]=1,n=!n}return null},s.prototype._findStart=function(){for(var e,t,n=this._nextSet(this._row);!t;){if(!(t=this._findPattern(this.START_PATTERN,n)))return null;if((e=t.start-(t.end-t.start))>=0&&this._matchRange(e,t.start,0))return t;n=t.end,t=null}},s.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start))<this._row.length&&this._matchRange(e.end,t,0)?e:null},s.prototype._findEnd=function(e,t){var n=this._findPattern(this.STOP_PATTERN,e,t,!1);return null!==n?this._verifyTrailingWhitespace(n):null},s.prototype._calculateFirstDigit=function(e){var t;for(t=0;t<this.CODE_FREQUENCY.length;t++)if(e===this.CODE_FREQUENCY[t])return t;return null},s.prototype._decodePayload=function(e,t,n){var r,o,i=0;for(r=0;r<6;r++){if(!(e=this._decodeCode(e.end)))return null;e.code>=this.CODE_G_START?(e.code=e.code-this.CODE_G_START,i|=1<<5-r):i|=0<<5-r,t.push(e.code),n.push(e)}if(null===(o=this._calculateFirstDigit(i)))return null;if(t.unshift(o),null===(e=this._findPattern(this.MIDDLE_PATTERN,e.end,!0,!1)))return null;for(n.push(e),r=0;r<6;r++){if(!(e=this._decodeCode(e.end,this.CODE_G_START)))return null;n.push(e),t.push(e.code)}return e},s.prototype._decode=function(){var e,t,n=[],r=[],o={};if(!(e=this._findStart()))return null;if(t={code:e.code,start:e.start,end:e.end},r.push(t),!(t=this._decodePayload(t,n,r)))return null;if(!(t=this._findEnd(t.end,!1)))return null;if(r.push(t),!this._checksum(n))return null;if(this.supplements.length>0){var i=this._decodeExtensions(t.end);if(!i)return null;var s=i.decodedCodes[i.decodedCodes.length-1],c={start:s.start+((s.end-s.start)/2|0),end:s.end};if(!this._verifyTrailingWhitespace(c))return null;o={supplement:i,code:n.join("")+i.code}}return a({code:n.join(""),start:e.start,end:t.end,codeset:"",startInfo:e,decodedCodes:r},o)},s.prototype._decodeExtensions=function(e){var t,n,r=this._nextSet(this._row,e),o=this._findPattern(this.EXTENSION_START_PATTERN,r,!1,!1);if(null===o)return null;for(t=0;t<this.supplements.length;t++)if(null!==(n=this.supplements[t].decode(this._row,o.end)))return{code:n.code,start:r,startInfo:o,end:n.end,codeset:"",decodedCodes:n.decodedCodes};return null},s.prototype._checksum=function(e){var t,n=0;for(t=e.length-2;t>=0;t-=2)n+=e[t];for(n*=3,t=e.length-1;t>=0;t-=2)n+=e[t];return n%10==0},s.CONFIG_KEYS={supplements:{type:"arrayOf(string)",default:[],description:"Allowed extensions to be decoded (2 and/or 5)"}},t.a=s},function(e,t,n){var r=n(38),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}},function(e,t,n){var r=n(11),o=n(119),i=n(146),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},function(e,t,n){"use strict";t.a={drawRect:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=1,n.beginPath(),n.strokeRect(e.x,e.y,t.x,t.y)},drawPath:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=r.lineWidth,n.beginPath(),n.moveTo(e[0][t.x],e[0][t.y]);for(var o=1;o<e.length;o++)n.lineTo(e[o][t.x],e[o][t.y]);n.closePath(),n.stroke()},drawImage:function(e,t,n){var r,o=n.getImageData(0,0,t.x,t.y),i=o.data,a=e.length,s=i.length;if(s/a!=4)return!1;for(;a--;)r=e[a],i[--s]=255,i[--s]=r,i[--s]=r,i[--s]=r;return n.putImageData(o,0,0),!0}}},function(e,t,n){var r=n(133),o=n(134),i=n(135),a=n(136),s=n(137);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(5).Symbol;e.exports=r},function(e,t,n){var r=n(17);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(2),o=n(130),i=n(154),a=n(165);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},function(e,t,n){var r=n(131);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(22)(Object,"create");e.exports=r},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(96),o=n(6),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){"use strict";var r=n(50),o=n(3);t.b=function(e,t){return{x:e,y:t,toVec2:function(){return i.clone([this.x,this.y])},toVec3:function(){return a.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}},t.f=function(e,t){var n=function(e,t){t||(t=8);var n,r=8-t;function i(e,t){var r,o=0;for(r=e;r<=t;r++)o+=n[r];return o}function a(e,t){var r,o=0;for(r=e;r<=t;r++)o+=r*n[r];return o}return function(){var r,s,c,u,l,d=[0],f=(1<<t)-1;for(n=function(e,t){t||(t=8);for(var n=e.data,r=n.length,o=8-t,i=new Int32Array(1<<t);r--;)i[n[r]>>o]++;return i}(e,t),u=1;u<f;u++)0==(c=(r=i(0,u))*(s=i(u+1,f)))&&(c=1),l=a(0,u)*s-a(u+1,f)*r,d[u]=l*l/c;return o.a.maxIndex(d)}()<<r}(e);return function(e,t,n){n||(n=e);for(var r=e.data,o=r.length,i=n.data;o--;)i[o]=r[o]<t?1:0}(e,n,t),n},t.g=function(e,t,n){var o,i,a,s,c=[];function u(e){var t=!1;for(i=0;i<c.length;i++)(a=c[i]).fits(e)&&(a.add(e),t=!0);return t}for(n||(n="rad"),o=0;o<e.length;o++)u(s=r.a.createPoint(e[o],o,n))||c.push(r.a.create(s,t));return c},t.h=function(e,t,n){var r,o,i,a,s=0,c=0,u=[];for(r=0;r<t;r++)u[r]={score:0,item:null};for(r=0;r<e.length;r++)if((o=n.apply(this,[e[r]]))>c)for((i=u[s]).score=o,i.item=e[r],c=Number.MAX_VALUE,a=0;a<t;a++)u[a].score<c&&(c=u[a].score,s=a);return u},t.c=function(e,t,n){for(var r,o=0,i=t.x,a=Math.floor(e.length/4),s=t.x/2,c=0,u=t.x;i<a;){for(r=0;r<s;r++)n[c]=(.299*e[4*o+0]+.587*e[4*o+1]+.114*e[4*o+2]+(.299*e[4*(o+1)+0]+.587*e[4*(o+1)+1]+.114*e[4*(o+1)+2])+(.299*e[4*i+0]+.587*e[4*i+1]+.114*e[4*i+2])+(.299*e[4*(i+1)+0]+.587*e[4*(i+1)+1]+.114*e[4*(i+1)+2]))/4,c++,o+=2,i+=2;o+=u,i+=u}},t.d=function(e,t,n){var r,o=e.length/4|0;if(n&&!0===n.singleChannel)for(r=0;r<o;r++)t[r]=e[4*r+0];else for(r=0;r<o;r++)t[r]=.299*e[4*r+0]+.587*e[4*r+1]+.114*e[4*r+2]},t.i=function(e,t){for(var n=e.data,r=e.size.x,o=t.data,i=0,a=r,s=n.length,c=r/2,u=0;a<s;){for(var l=0;l<c;l++)o[u]=Math.floor((n[i]+n[i+1]+n[a]+n[a+1])/4),u++,i+=2,a+=2;i+=r,a+=r}},t.a=function(e,t){var n=e[0],r=e[1],o=e[2],i=o*r,a=i*(1-Math.abs(n/60%2-1)),s=o-i,c=0,u=0,l=0;return n<60?(c=i,u=a):n<120?(c=a,u=i):n<180?(u=i,l=a):n<240?(u=a,l=i):n<300?(c=a,l=i):n<360&&(c=i,l=a),(t=t||[0,0,0])[0]=255*(c+s)|0,t[1]=255*(u+s)|0,t[2]=255*(l+s)|0,t},t.e=function(e,t){var n,r=s(t.x),o=s(t.y),i=Math.max(t.x,t.y),a=function(e,t){for(var n=0,r=0,o=[];n<e.length&&r<t.length;)e[n]===t[r]?(o.push(e[n]),n++,r++):e[n]>t[r]?r++:n++;return o}(r,o),c=[8,10,15,20,32,60,80],u={"x-small":5,small:4,medium:3,large:2,"x-large":1},l=u[e]||u.medium,d=c[l],f=Math.floor(i/d);function h(e){for(var t=0,n=e[Math.floor(e.length/2)];t<e.length-1&&e[t]<f;)t++;return t>0&&(n=Math.abs(e[t]-f)>Math.abs(e[t-1]-f)?e[t-1]:e[t]),f/n<c[l+1]/c[l]&&f/n>c[l-1]/c[l]?{x:n,y:n}:null}return(n=h(a))||(n=h(s(i)))||(n=h(s(f*d))),n},t.j=function(e,t,n){var r={width:e,height:t},o=Object.keys(n).reduce(function(e,t){var o=function(e){return{value:parseFloat(e),unit:(e.indexOf("%"),e.length,"%")}}(n[t]),i=c[t](o,r);return e[t]=i,e},{});return{sx:o.left,sy:o.top,sw:o.right-o.left,sh:o.bottom-o.top}};var i={clone:n(7)},a={clone:n(83)};function s(e){var t,n=[],r=[];for(t=1;t<Math.sqrt(e)+1;t++)e%t==0&&(r.push(t),t!==e/t&&n.unshift(Math.floor(e/t)));return r.concat(n)}var c={top:function(e,t){if("%"===e.unit)return Math.floor(t.height*(e.value/100))},right:function(e,t){if("%"===e.unit)return Math.floor(t.width-t.width*(e.value/100))},bottom:function(e,t){if("%"===e.unit)return Math.floor(t.height-t.height*(e.value/100))},left:function(e,t){if("%"===e.unit)return Math.floor(t.width*(e.value/100))}}},function(e,t,n){"use strict";var r=n(53),o=n(19),i=n(3),a={clone:n(7)};function s(e,t,n,r){t?this.data=t:n?(this.data=new n(e.x*e.y),n===Array&&r&&i.a.init(this.data,0)):(this.data=new Uint8Array(e.x*e.y),Uint8Array===Array&&r&&i.a.init(this.data,0)),this.size=e}s.prototype.inImageWithBorder=function(e,t){return e.x>=t&&e.y>=t&&e.x<this.size.x-t&&e.y<this.size.y-t},s.sample=function(e,t,n){var r=Math.floor(t),o=Math.floor(n),i=e.size.x,a=o*e.size.x+r,s=e.data[a+0],c=e.data[a+1],u=e.data[a+i],l=e.data[a+i+1],d=s-c;return t-=r,n-=o,Math.floor(t*(n*(d-u+l)-d)+n*(u-s)+s)},s.clearArray=function(e){for(var t=e.length;t--;)e[t]=0},s.prototype.subImage=function(e,t){return new r.a(e,t,this)},s.prototype.subImageAsCopy=function(e,t){var n,r,o=e.size.y,i=e.size.x;for(n=0;n<i;n++)for(r=0;r<o;r++)e.data[r*i+n]=this.data[(t.y+r)*this.size.x+t.x+n]},s.prototype.copyTo=function(e){for(var t=this.data.length,n=this.data,r=e.data;t--;)r[t]=n[t]},s.prototype.get=function(e,t){return this.data[t*this.size.x+e]},s.prototype.getSafe=function(e,t){var n;if(!this.indexMapping){for(this.indexMapping={x:[],y:[]},n=0;n<this.size.x;n++)this.indexMapping.x[n]=n,this.indexMapping.x[n+this.size.x]=n;for(n=0;n<this.size.y;n++)this.indexMapping.y[n]=n,this.indexMapping.y[n+this.size.y]=n}return this.data[this.indexMapping.y[t+this.size.y]*this.size.x+this.indexMapping.x[e+this.size.x]]},s.prototype.set=function(e,t,n){return this.data[t*this.size.x+e]=n,this},s.prototype.zeroBorder=function(){var e,t=this.size.x,n=this.size.y,r=this.data;for(e=0;e<t;e++)r[e]=r[(n-1)*t+e]=0;for(e=1;e<n-1;e++)r[e*t]=r[e*t+(t-1)]=0},s.prototype.invert=function(){for(var e=this.data,t=e.length;t--;)e[t]=e[t]?0:1},s.prototype.convolve=function(e){var t,n,r,o,i=e.length/2|0,a=0;for(n=0;n<this.size.y;n++)for(t=0;t<this.size.x;t++){for(a=0,o=-i;o<=i;o++)for(r=-i;r<=i;r++)a+=e[o+i][r+i]*this.getSafe(t+r,n+o);this.data[n*this.size.x+t]=a}},s.prototype.moments=function(e){var t,n,r,o,i,s,c,u,l,d,f=this.data,h=this.size.y,p=this.size.x,g=[],y=[],m=Math.PI,v=m/4;if(e<=0)return y;for(i=0;i<e;i++)g[i]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(n=0;n<h;n++)for(o=n*n,t=0;t<p;t++)(r=f[n*p+t])>0&&((s=g[r-1]).m00+=1,s.m01+=n,s.m10+=t,s.m11+=t*n,s.m02+=o,s.m20+=t*t);for(i=0;i<e;i++)s=g[i],isNaN(s.m00)||0===s.m00||(u=s.m10/s.m00,l=s.m01/s.m00,c=s.m11/s.m00-u*l,d=(s.m02/s.m00-l*l-(s.m20/s.m00-u*u))/(2*c),d=.5*Math.atan(d)+(c>=0?v:-v)+m,s.theta=(180*d/m+90)%180-90,s.theta<0&&(s.theta+=180),s.rad=d>m?d-m:d,s.vec=a.clone([Math.cos(d),Math.sin(d)]),y.push(s));return y},s.prototype.show=function(e,t){var n,r,o,i,a,s,c;for(t||(t=1),n=e.getContext("2d"),e.width=this.size.x,e.height=this.size.y,o=(r=n.getImageData(0,0,e.width,e.height)).data,i=0,c=0;c<this.size.y;c++)for(s=0;s<this.size.x;s++)a=c*this.size.x+s,i=this.get(s,c)*t,o[4*a+0]=i,o[4*a+1]=i,o[4*a+2]=i,o[4*a+3]=255;n.putImageData(r,0,0)},s.prototype.overlay=function(e,t,r){(!t||t<0||t>360)&&(t=360);for(var i=[0,1,1],a=[0,0,0],s=[255,255,255],c=[0,0,0],u=[],l=e.getContext("2d"),d=l.getImageData(r.x,r.y,this.size.x,this.size.y),f=d.data,h=this.data.length;h--;)i[0]=this.data[h]*t,u=i[0]<=0?s:i[0]>=360?c:n.i(o.a)(i,a),f[4*h+0]=u[0],f[4*h+1]=u[1],f[4*h+2]=u[2],f[4*h+3]=255;l.putImageData(d,r.x,r.y)},t.a=s},function(e,t,n){var r=n(37);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(97),o=n(120);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(27);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(25),o=n(26);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(8),o=n(0);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(8),o=n(6);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(100),o=n(116)(function(e,t,n){r(e,t,n)});e.exports=o},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(e,t){var n,r=e.data,o=t.data,i=this.searchDirections,a=e.size.x;function s(e,t,s,c){var u,l,d;for(u=0;u<7;u++){if(l=e.cy+i[e.dir][0],d=e.cx+i[e.dir][1],r[n=l*a+d]===t&&(0===o[n]||o[n]===s))return o[n]=s,e.cy=l,e.cx=d,!0;0===o[n]&&(o[n]=c),e.dir=(e.dir+1)%8}return!1}function c(e,t,n){return{dir:n,x:e,y:t,next:null,prev:null}}return{trace:function(e,t,n,r){return s(e,t,n,r)},contourTracing:function(e,t,n,r,o){return function(e,t,n,r,o){var i,a,u,l=null,d={cx:t,cy:e,dir:0};if(s(d,r,n,o)){i=l=c(t,e,d.dir),u=d.dir,(a=c(d.cx,d.cy,0)).prev=i,i.next=a,a.next=null,i=a;do{d.dir=(d.dir+6)%8,s(d,r,n,o),u!==d.dir?(i.dir=d.dir,(a=c(d.cx,d.cy,0)).prev=i,i.next=a,a.next=null,i=a):(i.dir=u,i.x=d.cx,i.y=d.cy),u=d.dir}while(d.cx!==t||d.cy!==e);l.prev=i.prev,i.prev.next=l}return l}(e,t,n,r,o)}}}}},function(e,t,n){"use strict";var r=n(1),o=n(3);function i(){r.a.call(this)}i.prototype=Object.create(r.a.prototype,{ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}}),i.prototype.constructor=i,i.prototype._decode=function(){var e,t,n,r,i=[0,0,0,0,0,0,0,0,0],a=[],s=this._findStart();if(!s)return null;r=this._nextSet(this._row,s.end);do{if(i=this._toCounters(r,i),(n=this._toPattern(i))<0)return null;if((e=this._patternToChar(n))<0)return null;a.push(e),t=r,r+=o.a.sum(i),r=this._nextSet(this._row,r)}while("*"!==e);return a.pop(),a.length&&this._verifyTrailingWhitespace(t,r,i)?{code:a.join(""),start:s.start,end:r,startInfo:s,decodedCodes:a}:null},i.prototype._verifyTrailingWhitespace=function(e,t,n){var r=o.a.sum(n);return 3*(t-e-r)>=r},i.prototype._patternToChar=function(e){var t;for(t=0;t<this.CHARACTER_ENCODINGS.length;t++)if(this.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(this.ALPHABET[t]);return-1},i.prototype._findNextWidth=function(e,t){var n,r=Number.MAX_VALUE;for(n=0;n<e.length;n++)e[n]<r&&e[n]>t&&(r=e[n]);return r},i.prototype._toPattern=function(e){for(var t,n,r=e.length,o=0,i=r,a=0;i>3;){for(o=this._findNextWidth(e,o),i=0,t=0,n=0;n<r;n++)e[n]>o&&(t|=1<<r-1-n,i++,a+=e[n]);if(3===i){for(n=0;n<r&&i>0;n++)if(e[n]>o&&(i--,2*e[n]>=a))return-1;return t}}return-1},i.prototype._findStart=function(){var e,t,n,r=this._nextSet(this._row),o=r,i=[0,0,0,0,0,0,0,0,0],a=0,s=!1;for(e=r;e<this._row.length;e++)if(this._row[e]^s)i[a]++;else{if(a===i.length-1){if(this._toPattern(i)===this.ASTERISK&&(n=Math.floor(Math.max(0,o-(e-o)/4)),this._matchRange(n,o,0)))return{start:o,end:e};for(o+=i[0]+i[1],t=0;t<7;t++)i[t]=i[t+2];i[7]=0,i[8]=0,a--}else a++;i[a]=1,s=!s}return null},t.a=i},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]}},function(e,t,n){var r=n(22)(n(5),"Map");e.exports=r},function(e,t,n){var r=n(138),o=n(139),i=n(140),a=n(141),s=n(142);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(21),o=n(17);e.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(21),o=n(17),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(22),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(47))},function(e,t,n){var r=n(147)(Object.getPrototypeOf,Object);e.exports=r},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(87),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),c=Array(s);++a<s;)c[a]=i[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=i[a];return u[t]=n(c),r(e,this,u)}}},function(e,t,n){var r=n(106),o=n(148)(r);e.exports=o},function(e,t){e.exports=function(e){return e}},function(e,t,n){(function(e){var r=n(5),o=n(163),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(t,n(29)(e))},function(e,t,n){var r=n(98),o=n(109),i=n(145),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t,n){var r=n(88),o=n(99),i=n(24);e.exports=function(e){return i(e)?r(e,!0):o(e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i,a,s,c,u,l,d=r(28),f=r.n(d),h=r(54),p=(r.n(h),r(20)),g=r(64),y=r(57),m=r(51),v=r(59),b=r(9),_=r(49),w=r(56),E=r(63),S=r(61),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x={clone:r(7)},C={ctx:{image:null,overlay:null},dom:{image:null,overlay:null}},A=[],T=!0,O={};function D(e){!function(e){s=e||new p.a({x:o.getWidth(),y:o.getHeight()}),console.log(s.size),c=[x.clone([0,0]),x.clone([0,s.size.y]),x.clone([s.size.x,s.size.y]),x.clone([s.size.x,0])],g.a.init(s,O.locator)}(e),u=y.a.create(O.decoder,s)}function I(){var e=O.inputStream.target;if(e&&e.nodeName&&1===e.nodeType)return e;var t="string"==typeof e?e:"#interactive.viewport";return document.querySelector(t)}function N(e,t){var n=e;e&&T&&(function e(t){var n,r=o.getTopRight(),i=r.x,a=r.y;if(0!==i||0!==a){if(t.barcodes)for(n=0;n<t.barcodes.length;n++)e(t.barcodes[n]);var s;if(t.line&&2===t.line.length&&((s=t.line)[0].x+=i,s[0].y+=a,s[1].x+=i,s[1].y+=a),t.box&&c(t.box),t.boxes&&t.boxes.length>0)for(n=0;n<t.boxes.length;n++)c(t.boxes[n])}function c(e){for(var t=e.length;t--;)e[t][0]+=i,e[t][1]+=a}}(e),function e(t,n){n&&l&&(t.barcodes?t.barcodes.filter(function(e){return e.codeResult}).forEach(function(t){return e(t,n)}):t.codeResult&&l.addResult(n,o.getCanvasSize(),t.codeResult))}(e,t),n=e.barcodes||e),m.a.publish("processed",n),function(e){return e&&(e.barcodes?e.barcodes.some(function(e){return e.codeResult}):e.codeResult)}(e)&&m.a.publish("detected",n)}function P(){var e,t;(t=O.locate?g.a.locate():[[x.clone(c[0]),x.clone(c[1]),x.clone(c[2]),x.clone(c[3])]])?((e=(e=u.decodeFromBoundingBoxes(t))||{}).boxes=t,N(e,s.data)):N()}function M(){var e;if(T){if(A.length>0){if(!(e=A.filter(function(e){return!e.busy})[0]))return;i.attachData(e.imageData)}else i.attachData(s.data);i.grab()&&(e?(e.busy=!0,e.worker.postMessage({cmd:"process",imageData:e.imageData},[e.imageData.buffer])):P())}else P()}function L(){var e,t;T&&"LiveStream"===O.inputStream.type?(e=null,t=1e3/(O.frequency||60),a=!1,function n(r){e=e||r,a||(r>=e&&(e+=t,M()),window.requestAnimFrame(n))}(performance.now())):M()}function U(t){var n,r,i={worker:void 0,imageData:new Uint8Array(o.getWidth()*o.getHeight()),busy:!0};n=function(){var t,n;return void 0!==e&&(n=e),t=new Blob(["("+k.toString()+")("+n+");"],{type:"text/javascript"}),window.URL.createObjectURL(t)}(),i.worker=new Worker(n),i.worker.onmessage=function(e){if("initialized"===e.data.event)return URL.revokeObjectURL(n),i.busy=!1,i.imageData=new Uint8Array(e.data.imageData),console.log("Worker initialized"),t(i);"processed"===e.data.event?(i.imageData=new Uint8Array(e.data.imageData),i.busy=!1,N(e.data.result,i.imageData)):"error"===e.data.event&&console.log("Worker error: "+e.data.message)},i.worker.postMessage({cmd:"init",size:{x:o.getWidth(),y:o.getHeight()},imageData:i.imageData,config:(r=O,R({},r,{inputStream:R({},r.inputStream,{target:null})}))},[i.imageData.buffer])}function k(e){if(e){var t=e().default;if(!t)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var n;function r(e){self.postMessage({event:"processed",imageData:n.data,result:e},[n.data.buffer])}function o(){self.postMessage({event:"initialized",imageData:n.data},[n.data.buffer])}self.onmessage=function(e){if("init"===e.data.cmd){var i=e.data.config;i.numOfWorkers=0,n=new t.ImageWrapper({x:e.data.size.x,y:e.data.size.y},new Uint8Array(e.data.imageData)),t.init(i,o,n),t.onProcessed(r)}else"process"===e.data.cmd?(n.data=new Uint8Array(e.data.imageData),t.start()):"setReaders"===e.data.cmd&&t.setReaders(e.data.readers)}}function j(e,t){var n=e-A.length;if(0===n)return t&&t();if(n<0)return A.slice(n).forEach(function(e){e.worker.terminate(),console.log("Worker terminated!")}),A=A.slice(0,n),t&&t();for(var r=function(n){A.push(n),A.length>=e&&t&&t()},o=0;o<n;o++)U(r)}n.default={init:function(e,t,n){if(O=f()({},w.a,e),n)return T=!1,D(n),t();!function(e){var t;if("VideoStream"===O.inputStream.type)t=document.createElement("video"),o=E.a.createVideoStream(t);else if("ImageStream"===O.inputStream.type)o=E.a.createImageStream();else if("LiveStream"===O.inputStream.type){var n=I();n&&((t=n.querySelector("video"))||(t=document.createElement("video"),n.appendChild(t))),o=E.a.createLiveStream(t),v.a.request(t,O.inputStream.constraints).then(function(){o.trigger("canrecord")}).catch(function(t){return e(t)})}o.setAttribute("preload","auto"),o.setInputStream(O.inputStream),o.addEventListener("canrecord",function(e){g.a.checkImageConstraints(o,O.locator),function(){if("undefined"!=typeof document){var e=I();if(C.dom.image=document.querySelector("canvas.imgBuffer"),C.dom.image||(C.dom.image=document.createElement("canvas"),C.dom.image.className="imgBuffer",e&&"ImageStream"===O.inputStream.type&&e.appendChild(C.dom.image)),C.ctx.image=C.dom.image.getContext("2d"),C.dom.image.width=o.getCanvasSize().x,C.dom.image.height=o.getCanvasSize().y,C.dom.overlay=document.querySelector("canvas.drawingBuffer"),!C.dom.overlay){C.dom.overlay=document.createElement("canvas"),C.dom.overlay.className="drawingBuffer",e&&e.appendChild(C.dom.overlay);var t=document.createElement("br");t.setAttribute("clear","all"),e&&e.appendChild(t)}C.ctx.overlay=C.dom.overlay.getContext("2d"),C.dom.overlay.width=o.getCanvasSize().x,C.dom.overlay.height=o.getCanvasSize().y}}(),i=S.a.create(o,C.dom.image),j(O.numOfWorkers,function(){0===O.numOfWorkers&&D(),function(e){o.play(),e()}(e)})}.bind(void 0,e))}(t)},start:function(){L()},stop:function(){a=!0,j(0),"LiveStream"===O.inputStream.type&&(v.a.release(),o.clearEventHandlers())},pause:function(){a=!0},onDetected:function(e){m.a.subscribe("detected",e)},offDetected:function(e){m.a.unsubscribe("detected",e)},onProcessed:function(e){m.a.subscribe("processed",e)},offProcessed:function(e){m.a.unsubscribe("processed",e)},setReaders:function(e){!function(e){u?u.setReaders(e):T&&A.length>0&&A.forEach(function(t){t.worker.postMessage({cmd:"setReaders",readers:e})})}(e)},registerResultCollector:function(e){e&&"function"==typeof e.addResult&&(l=e)},canvas:C,decodeSingle:function(e,t){var n=this;e=f()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:e.src},numOfWorkers:e.debug?0:1,locator:{halfSample:!1}},e),this.init(e,function(){m.a.once("processed",function(e){n.stop(),t.call(null,e)},!0),L()})},ImageWrapper:p.a,ImageDebug:b.a,ResultCollector:_.a,CameraAccess:v.a}},function(e,t,n){"use strict";var r=n(9);t.a={create:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=[],i=e.capacity||20,a=!0===e.capture;function s(t){return i&&t&&!function(e,t){return!!t&&t.some(function(t){return Object.keys(t).every(function(n){return t[n]===e[n]})})}(t,e.blacklist)&&function(e,t){return"function"!=typeof t||t(e)}(t,e.filter)}return{addResult:function(e,c,u){var l={};s(u)&&(i--,l.codeResult=u,a&&(t.width=c.x,t.height=c.y,r.a.drawImage(e,c,n),l.frame=t.toDataURL()),o.push(l))},getResults:function(){return o}}}}},function(e,t,n){"use strict";var r={clone:n(7),dot:n(32)};t.a={create:function(e,t){var n=[],o={rad:0,vec:r.clone([0,0])},i={};function a(e){i[e.id]=e,n.push(e)}function s(){var e,t=0;for(e=0;e<n.length;e++)t+=n[e].rad;o.rad=t/n.length,o.vec=r.clone([Math.cos(o.rad),Math.sin(o.rad)])}return a(e),s(),{add:function(e){i[e.id]||(a(e),s())},fits:function(e){return Math.abs(r.dot(e.point.vec,o.vec))>t},getPoints:function(){return n},getCenter:function(){return o}}},createPoint:function(e,t,n){return{rad:e[n],point:e,id:t}}}},function(e,t,n){"use strict";t.a=function(){var e={};function t(t){return e[t]||(e[t]={subscribers:[]}),e[t]}function n(e,t){e.async?setTimeout(function(){e.callback(t)},4):e.callback(t)}function r(e,n,r){var o;if("function"==typeof n)o={callback:n,async:r};else if(!(o=n).callback)throw"Callback was not specified on options";t(e).subscribers.push(o)}return{subscribe:function(e,t,n){return r(e,t,n)},publish:function(e,r){var o=t(e),i=o.subscribers;i.filter(function(e){return!!e.once}).forEach(function(e){n(e,r)}),o.subscribers=i.filter(function(e){return!e.once}),o.subscribers.forEach(function(e){n(e,r)})},once:function(e,t,n){r(e,{callback:t,async:n,once:!0})},unsubscribe:function(n,r){var o;n?(o=t(n)).subscribers=o&&r?o.subscribers.filter(function(e){return e.callback!==r}):[]:e={}}}}()},function(e,t,n){"use strict";t.b=function(){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():Promise.reject(new Error("enumerateDevices is not defined"))},t.a=function(e){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e):Promise.reject(new Error("getUserMedia is not defined"))}},function(e,t,n){"use strict";function r(e,t,n){n||(n={data:null,size:t}),this.data=n.data,this.originalSize=n.size,this.I=n,this.from=e,this.size=t}r.prototype.show=function(e,t){var n,r,o,i,a,s,c;for(t||(t=1),n=e.getContext("2d"),e.width=this.size.x,e.height=this.size.y,o=(r=n.getImageData(0,0,e.width,e.height)).data,i=0,a=0;a<this.size.y;a++)for(s=0;s<this.size.x;s++)c=a*this.size.x+s,i=this.get(s,a)*t,o[4*c+0]=i,o[4*c+1]=i,o[4*c+2]=i,o[4*c+3]=255;r.data=o,n.putImageData(r,0,0)},r.prototype.get=function(e,t){return this.data[(this.from.y+t)*this.originalSize.x+this.from.x+e]},r.prototype.updateData=function(e){this.originalSize=e.size,this.data=e.data},r.prototype.updateFrom=function(e){return this.from=e,this},t.a=r},function(e,t){"undefined"!=typeof window&&(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}),Math.imul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t})},function(e,t){e.exports={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:0,decoder:{readers:["code_128_reader"],debug:{drawBoundingBox:!1,showFrequency:!1,drawScanline:!1,showPattern:!1}},locator:{halfSample:!0,patchSize:"medium",debug:{showCanvas:!1,showPatches:!1,showFoundPatches:!1,showSkeleton:!1,showLabels:!1,showPatchLabels:!1,showRemainingPatchLabels:!1,boxFromPatches:{showTransformed:!1,showTransformedBox:!1,showBB:!1}}}}},function(e,t,n){"use strict";var r;r=n(55),t.a=r},function(e,t,n){"use strict";var r=n(58),o=n(9),i=n(69),a=n(4),s=n(31),c=n(70),u=n(68),l=n(77),d=n(74),f=n(72),h=n(73),p=n(76),g=n(75),y=n(67),m=n(71),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b={code_128_reader:i.a,ean_reader:a.a,ean_5_reader:h.a,ean_2_reader:f.a,ean_8_reader:d.a,code_39_reader:s.a,code_39_vin_reader:c.a,codabar_reader:u.a,upc_reader:l.a,upc_e_reader:p.a,i2of5_reader:g.a,"2of5_reader":y.a,code_93_reader:m.a};t.a={create:function(e,t){var n={ctx:{frequency:null,pattern:null,overlay:null},dom:{frequency:null,pattern:null,overlay:null}},i=[];function a(){e.readers.forEach(function(e){var t,n={},r=[];"object"===(void 0===e?"undefined":v(e))?(t=e.format,n=e.config):"string"==typeof e&&(t=e),console.log("Before registering reader: ",t),n.supplements&&(r=n.supplements.map(function(e){return new b[e]})),i.push(new b[t](n,r))}),console.log("Registered Readers: "+i.map(function(e){return JSON.stringify({format:e.FORMAT,config:e.config})}).join(", "))}function s(a){var s,c=null,u=r.a.getBarcodeLine(t,a[0],a[1]);for(e.debug.showFrequency&&(o.a.drawPath(a,{x:"x",y:"y"},n.ctx.overlay,{color:"red",lineWidth:3}),r.a.debug.printFrequency(u.line,n.dom.frequency)),r.a.toBinaryLine(u),e.debug.showPattern&&r.a.debug.printPattern(u.line,n.dom.pattern),s=0;s<i.length&&null===c;s++)c=i[s].decodePattern(u.line);return null===c?null:{codeResult:c,barcodeLine:u}}function c(r){var i,a,c,u,l=n.ctx.overlay;return e.debug.drawBoundingBox&&l&&o.a.drawPath(r,{x:0,y:1},l,{color:"blue",lineWidth:2}),u=function(e){return Math.sqrt(Math.pow(Math.abs(e[1].y-e[0].y),2)+Math.pow(Math.abs(e[1].x-e[0].x),2))}(i=function(e){return[{x:(e[1][0]-e[0][0])/2+e[0][0],y:(e[1][1]-e[0][1])/2+e[0][1]},{x:(e[3][0]-e[2][0])/2+e[2][0],y:(e[3][1]-e[2][1])/2+e[2][1]}]}(r)),null===(i=function(e,n,r){function o(t){var r=t*Math.sin(n),o=t*Math.cos(n);e[0].y-=r,e[0].x-=o,e[1].y+=r,e[1].x+=o}for(o(r);r>1&&(!t.inImageWithBorder(e[0],0)||!t.inImageWithBorder(e[1],0));)o(-(r-=Math.ceil(r/2)));return e}(i,a=Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x),Math.floor(.1*u)))?null:(null===(c=s(i))&&(c=function(e,t,n){var r,o,i,a=Math.sqrt(Math.pow(e[1][0]-e[0][0],2)+Math.pow(e[1][1]-e[0][1],2)),c=null,u=Math.sin(n),l=Math.cos(n);for(r=1;r<16&&null===c;r++)i={y:(o=a/16*r*(r%2==0?-1:1))*u,x:o*l},t[0].y+=i.x,t[0].x-=i.y,t[1].y+=i.x,t[1].x-=i.y,c=s(t);return c}(r,i,a)),null===c?null:(c&&e.debug.drawScanline&&l&&o.a.drawPath(i,{x:"x",y:"y"},l,{color:"red",lineWidth:3}),{codeResult:c.codeResult,line:i,angle:a,pattern:c.barcodeLine.line,threshold:c.barcodeLine.threshold}))}return function(){if("undefined"!=typeof document){var e=document.querySelector("#debug.detection");n.dom.frequency=document.querySelector("canvas.frequency"),n.dom.frequency||(n.dom.frequency=document.createElement("canvas"),n.dom.frequency.className="frequency",e&&e.appendChild(n.dom.frequency)),n.ctx.frequency=n.dom.frequency.getContext("2d"),n.dom.pattern=document.querySelector("canvas.patternBuffer"),n.dom.pattern||(n.dom.pattern=document.createElement("canvas"),n.dom.pattern.className="patternBuffer",e&&e.appendChild(n.dom.pattern)),n.ctx.pattern=n.dom.pattern.getContext("2d"),n.dom.overlay=document.querySelector("canvas.drawingBuffer"),n.dom.overlay&&(n.ctx.overlay=n.dom.overlay.getContext("2d"))}}(),a(),function(){if("undefined"!=typeof document){var t,r=[{node:n.dom.frequency,prop:e.debug.showFrequency},{node:n.dom.pattern,prop:e.debug.showPattern}];for(t=0;t<r.length;t++)!0===r[t].prop?r[t].node.style.display="block":r[t].node.style.display="none"}}(),{decodeFromBoundingBox:function(e){return c(e)},decodeFromBoundingBoxes:function(t){var n,r,o=[],i=e.multiple;for(n=0;n<t.length;n++){var a=t[n];if((r=c(a)||{}).box=a,i)o.push(r);else if(r.codeResult)return r}if(i)return{barcodes:o}},setReaders:function(t){e.readers=t,i.length=0,a()}}}}},function(e,t,n){"use strict";n(20);var r={},o=1,i=-1;r.getBarcodeLine=function(e,t,n){var r,o,i,a,s,c,u,l,d=0|t.x,f=0|t.y,h=0|n.x,p=0|n.y,g=Math.abs(p-f)>Math.abs(h-d),y=[],m=e.data,v=e.size.x,b=255,_=0;function w(e,t){l=m[t*v+e],b=l<b?l:b,_=l>_?l:_,y.push(l)}for(g&&(c=d,d=f,f=c,c=h,h=p,p=c),d>h&&(c=d,d=h,h=c,c=f,f=p,p=c),r=h-d,o=Math.abs(p-f),i=r/2|0,s=f,a=f<p?1:-1,u=d;u<h;u++)g?w(s,u):w(u,s),(i-=o)<0&&(s+=a,i+=r);return{line:y,min:b,max:_}},r.toBinaryLine=function(e){var t,n,r,a,s,c,u=e.min,l=e.max,d=e.line,f=u+(l-u)/2,h=[],p=(l-u)/12,g=-p;for(r=d[0]>f?o:i,h.push({pos:0,val:d[0]}),s=0;s<d.length-2;s++)r!==(a=(t=d[s+1]-d[s])+(n=d[s+2]-d[s+1])<g&&d[s+1]<1.5*f?i:t+n>p&&d[s+1]>.5*f?o:r)&&(h.push({pos:s,val:d[s]}),r=a);for(h.push({pos:d.length,val:d[d.length-1]}),c=h[0].pos;c<h[1].pos;c++)d[c]=d[c]>f?0:1;for(s=1;s<h.length-1;s++)for(p=h[s+1].val>h[s].val?h[s].val+(h[s+1].val-h[s].val)/3*2|0:h[s+1].val+(h[s].val-h[s+1].val)/3|0,c=h[s].pos;c<h[s+1].pos;c++)d[c]=d[c]>p?0:1;return{line:d,threshold:p}},r.debug={printFrequency:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,t.height=256,r.beginPath(),r.strokeStyle="blue",n=0;n<e.length;n++)r.moveTo(n,255),r.lineTo(n,255-e[n]);r.stroke(),r.closePath()},printPattern:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,r.fillColor="black",n=0;n<e.length;n++)1===e[n]&&r.fillRect(n,0,1,100)}},t.a=r},function(e,t,n){"use strict";var r,o=n(162),i=n.n(o),a=n(52);function s(e){var t=i()(e,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==e.minAspectRatio&&e.minAspectRatio>0&&(t.aspectRatio=e.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==e.facing&&(t.facingMode=e.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),t}function c(){if(r){var e=r.getVideoTracks();if(e&&e.length)return e[0]}}t.a={request:function(e,t){return function(e){var t={audio:!1,video:s(e)};return t.video.deviceId&&t.video.facingMode&&delete t.video.facingMode,Promise.resolve(t)}(t).then(function(e,t){return n.i(a.a)(t).then(function(t){return new Promise(function(n){r=t,e.setAttribute("autoplay",!0),e.setAttribute("muted",!0),e.setAttribute("playsinline",!0),e.srcObject=t,e.addEventListener("loadedmetadata",function(){e.play(),n()})})}).then(function(e){return new Promise(function(t,n){var r=10;!function o(){r>0?e.videoWidth>10&&e.videoHeight>10?(console.log(e.videoWidth+"px x "+e.videoHeight+"px"),t()):window.setTimeout(o,500):n("Unable to play video stream. Is webcam working?"),r--}()})}.bind(null,e))}.bind(null,e))},release:function(){var e=r&&r.getVideoTracks();e&&e.length&&e[0].stop(),r=null},enumerateVideoDevices:function(){return n.i(a.b)().then(function(e){return e.filter(function(e){return"videoinput"===e.kind})})},getActiveStreamLabel:function(){var e=c();return e?e.label:""},getActiveTrack:c}},function(e,t,n){"use strict";t.a=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return/^blob\:/i.test(e)?(t=e,new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onreadystatechange=function(){r.readyState!==XMLHttpRequest.DONE||200!==r.status&&0!==r.status||e(this.response)},r.onerror=n,r.send()})).then(i).then(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=new DataView(e),i=e.byteLength,s=t.reduce(function(e,t){var n=Object.keys(r).filter(function(e){return r[e]===t})[0];return n&&(e[n]=t),e},{}),c=2;if(255!==n.getUint8(0)||216!==n.getUint8(1))return!1;for(;c<i;){if(255!==n.getUint8(c))return!1;if(225===n.getUint8(c+1))return a(n,c+4,s);c+=2+n.getUint16(c+2)}}(e,n)}):Promise.resolve(null)};var r={274:"orientation"},o=Object.keys(r).map(function(e){return r[e]});function i(e){return new Promise(function(t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsArrayBuffer(e)})}function a(e,t,n){if("Exif"!==function(e,t,n){for(var r="",o=t;o<t+4;o++)r+=String.fromCharCode(e.getUint8(o));return r}(e,t))return!1;var r=t+6,o=void 0;if(18761===e.getUint16(r))o=!1;else{if(19789!==e.getUint16(r))return!1;o=!0}if(42!==e.getUint16(r+2,!o))return!1;var i=e.getUint32(r+4,!o);return!(i<8)&&function(e,t,n,r,o){for(var i=e.getUint16(n,!o),a={},c=0;c<i;c++){var u=n+12*c+2,l=r[e.getUint16(u,!o)];l&&(a[l]=s(e,u,t,n,o))}return a}(e,r,r+i,n,o)}function s(e,t,n,r,o){var i=e.getUint16(t+2,!o),a=e.getUint32(t+4,!o);switch(i){case 3:if(1===a)return e.getUint16(t+8,!o)}}},function(e,t,n){"use strict";var r=n(19),o=Math.PI/180,i={create:function(e,t){var i,a={},s=e.getConfig(),c=n.i(r.b)(e.getRealWidth(),e.getRealHeight()),u=e.getCanvasSize(),l=n.i(r.b)(e.getWidth(),e.getHeight()),d=e.getTopRight(),f=d.x,h=d.y,p=null,g=null;return(i=t||document.createElement("canvas")).width=u.x,i.height=u.y,p=i.getContext("2d"),g=new Uint8Array(l.x*l.y),console.log("FrameGrabber",JSON.stringify({size:l,topRight:d,videoSize:c,canvasSize:u})),a.attachData=function(e){g=e},a.getData=function(){return g},a.grab=function(){var t,a,c,d=s.halfSample,y=e.getFrame(),m=y,v=0;if(m){if(c=u,(a=i).width!==c.x&&(console.log("WARNING: canvas-size needs to be adjusted"),a.width=c.x),a.height!==c.y&&(console.log("WARNING: canvas-size needs to be adjusted"),a.height=c.y),"ImageStream"===s.type&&(m=y.img,y.tags&&y.tags.orientation))switch(y.tags.orientation){case 6:v=90*o;break;case 8:v=-90*o}return 0!==v?(p.translate(u.x/2,u.y/2),p.rotate(v),p.drawImage(m,-u.y/2,-u.x/2,u.y,u.x),p.rotate(-v),p.translate(-u.x/2,-u.y/2)):p.drawImage(m,0,0,u.x,u.y),t=p.getImageData(f,h,l.x,l.y).data,d?n.i(r.c)(t,l,g):n.i(r.d)(t,g,s),!0}return!1},a.getSize=function(){return l},a}};t.a=i},function(e,t,n){"use strict";var r=n(60),o={};function i(e,t){e.onload=function(){t.loaded(this)}}o.load=function(e,t,o,a,s){var c,u,l,d=new Array(a),f=new Array(d.length);if(!1===s)d[0]=e;else for(c=0;c<d.length;c++)l=o+c,d[c]=e+"image-"+("00"+l).slice(-3)+".jpg";for(f.notLoaded=[],f.addImage=function(e){f.notLoaded.push(e)},f.loaded=function(o){for(var i=f.notLoaded,a=0;a<i.length;a++)if(i[a]===o){i.splice(a,1);for(var c=0;c<d.length;c++){var u=d[c].substr(d[c].lastIndexOf("/"));if(-1!==o.src.lastIndexOf(u)){f[c]={img:o};break}}break}0===i.length&&(console.log("Images loaded"),!1===s?n.i(r.a)(e,["orientation"]).then(function(e){f[0].tags=e,t(f)}).catch(function(e){console.log(e),t(f)}):t(f))},c=0;c<d.length;c++)u=new Image,f.addImage(u),i(u,f),u.src=d[c]},t.a=o},function(e,t,n){"use strict";var r=n(62),o={createVideoStream:function(e){var t,n,r={},o=null,i=["canrecord","ended"],a={},s={x:0,y:0},c={x:0,y:0};return r.getRealWidth=function(){return e.videoWidth},r.getRealHeight=function(){return e.videoHeight},r.getWidth=function(){return t},r.getHeight=function(){return n},r.setWidth=function(e){t=e},r.setHeight=function(e){n=e},r.setInputStream=function(t){o=t,e.src=void 0!==t.src?t.src:""},r.ended=function(){return e.ended},r.getConfig=function(){return o},r.setAttribute=function(t,n){e.setAttribute(t,n)},r.pause=function(){e.pause()},r.play=function(){e.play()},r.setCurrentTime=function(t){"LiveStream"!==o.type&&(e.currentTime=t)},r.addEventListener=function(t,n,r){-1!==i.indexOf(t)?(a[t]||(a[t]=[]),a[t].push(n)):e.addEventListener(t,n,r)},r.clearEventHandlers=function(){i.forEach(function(t){var n=a[t];n&&n.length>0&&n.forEach(function(n){e.removeEventListener(t,n)})})},r.trigger=function(i,s){var u,l,d,f=a[i];if("canrecord"===i&&(l=e.videoWidth,d=e.videoHeight,t=o.size?l/d>1?o.size:Math.floor(l/d*o.size):l,n=o.size?l/d>1?Math.floor(d/l*o.size):o.size:d,c.x=t,c.y=n),f&&f.length>0)for(u=0;u<f.length;u++)f[u].apply(r,s)},r.setTopRight=function(e){s.x=e.x,s.y=e.y},r.getTopRight=function(){return s},r.setCanvasSize=function(e){c.x=e.x,c.y=e.y},r.getCanvasSize=function(){return c},r.getFrame=function(){return e},r},createLiveStream:function(e){e.setAttribute("autoplay",!0);var t=o.createVideoStream(e);return t.ended=function(){return!1},t},createImageStream:function(){var e,t,n={},o=null,i=0,a=0,s=0,c=!0,u=!1,l=null,d=0,f=null,h=!1,p=["canrecord","ended"],g={},y={x:0,y:0},m={x:0,y:0};function v(e,t){var r,o=g[e];if(o&&o.length>0)for(r=0;r<o.length;r++)o[r].apply(n,t)}return n.trigger=v,n.getWidth=function(){return e},n.getHeight=function(){return t},n.setWidth=function(t){e=t},n.setHeight=function(e){t=e},n.getRealWidth=function(){return i},n.getRealHeight=function(){return a},n.setInputStream=function(n){o=n,!1===n.sequence?(f=n.src,d=1):(f=n.src,d=n.length),u=!1,r.a.load(f,function(n){if(l=n,n[0].tags&&n[0].tags.orientation)switch(n[0].tags.orientation){case 6:case 8:i=n[0].img.height,a=n[0].img.width;break;default:i=n[0].img.width,a=n[0].img.height}else i=n[0].img.width,a=n[0].img.height;e=o.size?i/a>1?o.size:Math.floor(i/a*o.size):i,t=o.size?i/a>1?Math.floor(a/i*o.size):o.size:a,m.x=e,m.y=t,u=!0,s=0,setTimeout(function(){v("canrecord",[])},0)},1,d,o.sequence)},n.ended=function(){return h},n.setAttribute=function(){},n.getConfig=function(){return o},n.pause=function(){c=!0},n.play=function(){c=!1},n.setCurrentTime=function(e){s=e},n.addEventListener=function(e,t){-1!==p.indexOf(e)&&(g[e]||(g[e]=[]),g[e].push(t))},n.setTopRight=function(e){y.x=e.x,y.y=e.y},n.getTopRight=function(){return y},n.setCanvasSize=function(e){m.x=e.x,m.y=e.y},n.getCanvasSize=function(){return m},n.getFrame=function(){var e;return u?(c||(e=l[s],s<d-1?s++:setTimeout(function(){h=!0,v("ended",[])},0)),e):null},n}};t.a=o},function(e,t,n){"use strict";(function(e){var r,o,i,a,s,c,u,l,d,f,h,p,g=n(20),y=n(19),m=n(3),v=n(9),b=n(65),_=n(30),w=n(66),E={clone:n(7),dot:n(32),scale:n(81),transformMat2:n(82)},S={copy:n(78),create:n(79),invert:n(80)},R={ctx:{binary:null},dom:{binary:null}},x={x:0,y:0};function C(e){var t,n,o,i,s,c,u,l=d.size.x,f=d.size.y,h=-d.size.x,p=-d.size.y;for(t=0,n=0;n<e.length;n++)t+=(i=e[n]).rad,r.debug.showPatches&&v.a.drawRect(i.pos,a.size,R.ctx.binary,{color:"red"});for((t=(180*(t/=e.length)/Math.PI+90)%180-90)<0&&(t+=180),t=(180-t)*Math.PI/180,s=S.copy(S.create(),[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t)]),n=0;n<e.length;n++){for(i=e[n],o=0;o<4;o++)E.transformMat2(i.box[o],i.box[o],s);r.debug.boxFromPatches.showTransformed&&v.a.drawPath(i.box,{x:0,y:1},R.ctx.binary,{color:"#99ff00",lineWidth:2})}for(n=0;n<e.length;n++)for(i=e[n],o=0;o<4;o++)i.box[o][0]<l&&(l=i.box[o][0]),i.box[o][0]>h&&(h=i.box[o][0]),i.box[o][1]<f&&(f=i.box[o][1]),i.box[o][1]>p&&(p=i.box[o][1]);for(c=[[l,f],[h,f],[h,p],[l,p]],r.debug.boxFromPatches.showTransformedBox&&v.a.drawPath(c,{x:0,y:1},R.ctx.binary,{color:"#ff0000",lineWidth:2}),u=r.halfSample?2:1,s=S.invert(s,s),o=0;o<4;o++)E.transformMat2(c[o],c[o],s);for(r.debug.boxFromPatches.showBB&&v.a.drawPath(c,{x:0,y:1},R.ctx.binary,{color:"#ff0000",lineWidth:2}),o=0;o<4;o++)E.scale(c[o],c[o],u);return c}function A(e,t){d.subImageAsCopy(a,n.i(y.b)(e,t)),p.skeletonize(),r.debug.showSkeleton&&i.overlay(R.dom.binary,360,n.i(y.b)(e,t))}function T(e,t,r,o){var i,s,c,u,l=[],d=[],h=Math.ceil(f.x/3);if(e.length>=2){for(i=0;i<e.length;i++)e[i].m00>h&&l.push(e[i]);if(l.length>=2){for(c=function(e){var t=n.i(y.g)(e,.9),r=n.i(y.h)(t,1,function(e){return e.getPoints().length}),o=[],i=[];if(1===r.length){o=r[0].item.getPoints();for(var a=0;a<o.length;a++)i.push(o[a].point)}return i}(l),s=0,i=0;i<c.length;i++)s+=c[i].rad;c.length>1&&c.length>=l.length/4*3&&c.length>e.length/4&&(s/=c.length,u={index:t[1]*x.x+t[0],pos:{x:r,y:o},box:[E.clone([r,o]),E.clone([r+a.size.x,o]),E.clone([r+a.size.x,o+a.size.y]),E.clone([r,o+a.size.y])],moments:c,rad:s,vec:E.clone([Math.cos(s),Math.sin(s)])},d.push(u))}}return d}t.a={init:function(t,m){var v;h=t,o=(r=m).halfSample?new g.a({x:h.size.x/2|0,y:h.size.y/2|0}):h,f=n.i(y.e)(r.patchSize,o.size),x.x=o.size.x/f.x|0,x.y=o.size.y/f.y|0,d=new g.a(o.size,void 0,Uint8Array,!1),s=new g.a(f,void 0,Array,!0),v=new ArrayBuffer(65536),a=new g.a(f,new Uint8Array(v,0,f.x*f.y)),i=new g.a(f,new Uint8Array(v,f.x*f.y*3,f.x*f.y),void 0,!0),p=n.i(w.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:e,{size:f.x},v),l=new g.a({x:o.size.x/a.size.x|0,y:o.size.y/a.size.y|0},void 0,Array,!0),c=new g.a(l.size,void 0,void 0,!0),u=new g.a(l.size,void 0,Int32Array,!0),r.useWorker||"undefined"==typeof document||(R.dom.binary=document.createElement("canvas"),R.dom.binary.className="binaryBuffer",!0===r.debug.showCanvas&&document.querySelector("#debug").appendChild(R.dom.binary),R.ctx.binary=R.dom.binary.getContext("2d"),R.dom.binary.width=d.size.x,R.dom.binary.height=d.size.y)},locate:function(){var e,t;if(r.halfSample&&n.i(y.i)(h,o),n.i(y.f)(o,d),d.zeroBorder(),r.debug.showCanvas&&d.show(R.dom.binary,255),(e=function(){var e,t,n,o,c,u,l,d=[];for(e=0;e<x.x;e++)for(t=0;t<x.y;t++)A(n=a.size.x*e,o=a.size.y*t),i.zeroBorder(),m.a.init(s.data,0),u=b.a.create(i,s).rasterize(0),r.debug.showLabels&&s.overlay(R.dom.binary,Math.floor(360/u.count),{x:n,y:o}),c=s.moments(u.count),d=d.concat(T(c,[e,t],n,o));if(r.debug.showFoundPatches)for(e=0;e<d.length;e++)l=d[e],v.a.drawRect(l.pos,a.size,R.ctx.binary,{color:"#99ff00",lineWidth:2});return d}()).length<x.x*x.y*.05)return null;var f=function(e){var t,o,i=0,s=.95,d=0,f=[0,1,1],h=[0,0,0];function p(){var e;for(e=0;e<u.data.length;e++)if(0===u.data[e]&&1===c.data[e])return e;return u.length}function g(e){var t,n,r,o,a,d=e%u.size.x,f=e/u.size.x|0;if(e<u.data.length)for(r=l.data[e],u.data[e]=i,a=0;a<_.a.searchDirections.length;a++)n=f+_.a.searchDirections[a][0],t=d+_.a.searchDirections[a][1],o=n*u.size.x+t,0!==c.data[o]?0===u.data[o]&&Math.abs(E.dot(l.data[o].vec,r.vec))>s&&g(o):u.data[o]=Number.MAX_VALUE}for(m.a.init(c.data,0),m.a.init(u.data,0),m.a.init(l.data,null),t=0;t<e.length;t++)o=e[t],l.data[o.index]=o,c.data[o.index]=1;for(c.zeroBorder();(d=p())<u.data.length;)i++,g(d);if(r.debug.showPatchLabels)for(t=0;t<u.data.length;t++)u.data[t]>0&&u.data[t]<=i&&(o=l.data[t],f[0]=u.data[t]/(i+1)*360,n.i(y.a)(f,h),v.a.drawRect(o.pos,a.size,R.ctx.binary,{color:"rgb("+h.join(",")+")",lineWidth:2}));return i}(e);return f<1?null:0===(t=function(e){var t,n,r=[];for(t=0;t<e;t++)r.push(0);for(n=u.data.length;n--;)u.data[n]>0&&r[u.data[n]-1]++;return(r=r.map(function(e,t){return{val:e,label:t+1}})).sort(function(e,t){return t.val-e.val}),r.filter(function(e){return e.val>=5})}(f)).length?null:function(e,t){var o,i,s,c,d,f=[],h=[],p=[0,1,1],g=[0,0,0];for(o=0;o<e.length;o++){for(s=u.data.length,f.length=0;s--;)u.data[s]===e[o].label&&(c=l.data[s],f.push(c));if((d=C(f))&&(h.push(d),r.debug.showRemainingPatchLabels))for(i=0;i<f.length;i++)c=f[i],p[0]=e[o].label/(t+1)*360,n.i(y.a)(p,g),v.a.drawRect(c.pos,a.size,R.ctx.binary,{color:"rgb("+g.join(",")+")",lineWidth:2})}return h}(t,f)},checkImageConstraints:function(e,t){var r,o,i,a=e.getWidth(),s=e.getHeight(),c=t.halfSample?.5:1;if(e.getConfig().area&&(i=n.i(y.j)(a,s,e.getConfig().area),e.setTopRight({x:i.sx,y:i.sy}),e.setCanvasSize({x:a,y:s}),a=i.sw,s=i.sh),o={x:Math.floor(a*c),y:Math.floor(s*c)},r=n.i(y.e)(t.patchSize,o),console.log("Patch-Size: "+JSON.stringify(r)),e.setWidth(Math.floor(Math.floor(o.x/r.x)*(1/c)*r.x)),e.setHeight(Math.floor(Math.floor(o.y/r.y)*(1/c)*r.y)),e.getWidth()%r.x==0&&e.getHeight()%r.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width ("+a+" )and height ("+s+") must a multiple of "+r.x)}}}).call(t,n(47))},function(e,t,n){"use strict";var r=n(30),o={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(e,t){var n=e.data,i=t.data,a=e.size.x,s=e.size.y,c=r.a.create(e,t);return{rasterize:function(e){var t,r,u,l,d,f,h,p,g,y,m,v,b=[],_=0;for(v=0;v<400;v++)b[v]=0;for(b[0]=n[0],g=null,f=1;f<s-1;f++)for(l=0,r=b[0],d=1;d<a-1;d++)if(0===i[m=f*a+d])if((t=n[m])!==r){if(0===l)b[u=_+1]=t,r=t,null!==(h=c.contourTracing(f,d,u,t,o.DIR.OUTSIDE_EDGE))&&(_++,l=u,(p=o.createContour2D()).dir=o.CONTOUR_DIR.CW_DIR,p.index=l,p.firstVertex=h,p.nextpeer=g,p.insideContours=null,null!==g&&(g.prevpeer=p),g=p);else if(null!==(h=c.contourTracing(f,d,o.DIR.INSIDE_EDGE,t,l))){for((p=o.createContour2D()).firstVertex=h,p.insideContours=null,p.dir=0===e?o.CONTOUR_DIR.CCW_DIR:o.CONTOUR_DIR.CW_DIR,p.index=e,y=g;null!==y&&y.index!==l;)y=y.nextpeer;null!==y&&(p.nextpeer=y.insideContours,null!==y.insideContours&&(y.insideContours.prevpeer=p),y.insideContours=p)}}else i[m]=l;else i[m]===o.DIR.OUTSIDE_EDGE||i[m]===o.DIR.INSIDE_EDGE?(l=0,r=i[m]===o.DIR.INSIDE_EDGE?n[m]:b[0]):r=b[l=i[m]];for(y=g;null!==y;)y.index=e,y=y.nextpeer;return{cc:g,count:_}},debug:{drawContour:function(e,t){var n,r,i,a=e.getContext("2d"),s=t;for(a.strokeStyle="red",a.fillStyle="red",a.lineWidth=1,n=null!==s?s.insideContours:null;null!==s;){switch(null!==n?(r=n,n=n.nextpeer):(r=s,n=null!==(s=s.nextpeer)?s.insideContours:null),r.dir){case o.CONTOUR_DIR.CW_DIR:a.strokeStyle="red";break;case o.CONTOUR_DIR.CCW_DIR:a.strokeStyle="blue";break;case o.CONTOUR_DIR.UNKNOWN_DIR:a.strokeStyle="green"}i=r.firstVertex,a.beginPath(),a.moveTo(i.x,i.y);do{i=i.next,a.lineTo(i.x,i.y)}while(i!==r.firstVertex);a.stroke()}}}}}};t.a=o},function(e,t,n){"use strict";t.a=function(e,t,n){"use asm";var r=new e.Uint8Array(n),o=t.size|0,i=e.Math.imul;function a(e,t){e=e|0;t=t|0;var n=0,i=0,a=0,s=0,c=0,u=0,l=0,d=0;for(n=1;(n|0)<(o-1|0);n=n+1|0){d=d+o|0;for(i=1;(i|0)<(o-1|0);i=i+1|0){s=d-o|0;c=d+o|0;u=i-1|0;l=i+1|0;a=(r[e+s+u|0]|0)+(r[e+s+l|0]|0)+(r[e+d+i|0]|0)+(r[e+c+u|0]|0)+(r[e+c+l|0]|0)|0;if((a|0)==(5|0)){r[t+d+i|0]=1}else{r[t+d+i|0]=0}}}return}function s(e,t,n){e=e|0;t=t|0;n=n|0;var a=0;a=i(o,o)|0;while((a|0)>0){a=a-1|0;r[n+a|0]=(r[e+a|0]|0)-(r[t+a|0]|0)|0}}function c(e,t,n){e=e|0;t=t|0;n=n|0;var a=0;a=i(o,o)|0;while((a|0)>0){a=a-1|0;r[n+a|0]=r[e+a|0]|0|(r[t+a|0]|0)|0}}function u(e){e=e|0;var t=0,n=0;n=i(o,o)|0;while((n|0)>0){n=n-1|0;t=(t|0)+(r[e+n|0]|0)|0}return t|0}function l(e,t){e=e|0;t=t|0;var n=0;n=i(o,o)|0;while((n|0)>0){n=n-1|0;r[e+n|0]=t}}function d(e,t){e=e|0;t=t|0;var n=0,i=0,a=0,s=0,c=0,u=0,l=0,d=0;for(n=1;(n|0)<(o-1|0);n=n+1|0){d=d+o|0;for(i=1;(i|0)<(o-1|0);i=i+1|0){s=d-o|0;c=d+o|0;u=i-1|0;l=i+1|0;a=(r[e+s+u|0]|0)+(r[e+s+l|0]|0)+(r[e+d+i|0]|0)+(r[e+c+u|0]|0)+(r[e+c+l|0]|0)|0;if((a|0)>(0|0)){r[t+d+i|0]=1}else{r[t+d+i|0]=0}}}return}function f(e,t){e=e|0;t=t|0;var n=0;n=i(o,o)|0;while((n|0)>0){n=n-1|0;r[t+n|0]=r[e+n|0]|0}}function h(e){e=e|0;var t=0,n=0;for(t=0;(t|0)<(o-1|0);t=t+1|0){r[e+t|0]=0;r[e+n|0]=0;n=n+o-1|0;r[e+n|0]=0;n=n+1|0}for(t=0;(t|0)<(o|0);t=t+1|0){r[e+n|0]=0;n=n+1|0}}function p(){var e=0,t=0,n=0,r=0,p=0,g=0;t=i(o,o)|0;n=t+t|0;r=n+t|0;l(r,0);h(e);do{a(e,t);d(t,n);s(e,n,n);c(r,n,r);f(t,e);p=u(e)|0;g=(p|0)==0|0}while(!g)}return{skeletonize:p}}},function(e,t,n){"use strict";var r=n(1);function o(e){r.a.call(this,e),this.barSpaceRatio=[1,1]}var i={START_PATTERN:{value:[3,1,3,1,1,1]},STOP_PATTERN:{value:[3,1,1,1,3]},CODE_PATTERN:{value:[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.3,writable:!0},FORMAT:{value:"2of5"}},a=i.START_PATTERN.value.reduce(function(e,t){return e+t},0);o.prototype=Object.create(r.a.prototype,i),o.prototype.constructor=o,o.prototype._findPattern=function(e,t,n,r){var o,i,a,s,c=[],u=0,l={error:Number.MAX_VALUE,code:-1,start:0,end:0},d=this.AVG_CODE_ERROR;for(n=n||!1,r=r||!1,t||(t=this._nextSet(this._row)),o=0;o<e.length;o++)c[o]=0;for(o=t;o<this._row.length;o++)if(this._row[o]^n)c[u]++;else{if(u===c.length-1){for(s=0,a=0;a<c.length;a++)s+=c[a];if((i=this._matchPattern(c,e))<d)return l.error=i,l.start=o-s,l.end=o,l;if(!r)return null;for(a=0;a<c.length-2;a++)c[a]=c[a+2];c[c.length-2]=0,c[c.length-1]=0,u--}else u++;c[u]=1,n=!n}return null},o.prototype._findStart=function(){for(var e,t,n=this._nextSet(this._row),r=1;!t;){if(!(t=this._findPattern(this.START_PATTERN,n,!1,!0)))return null;if(r=Math.floor((t.end-t.start)/a),(e=t.start-5*r)>=0&&this._matchRange(e,t.start,0))return t;n=t.end,t=null}},o.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},o.prototype._findEnd=function(){var e,t,n;return this._row.reverse(),n=this._nextSet(this._row),e=this._findPattern(this.STOP_PATTERN,n,!1,!0),this._row.reverse(),null===e?null:(t=e.start,e.start=this._row.length-e.end,e.end=this._row.length-t,null!==e?this._verifyTrailingWhitespace(e):null)},o.prototype._decodeCode=function(e){var t,n,r,o=this.AVG_CODE_ERROR,i={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t=0;t<e.length;t++)e[t];for(r=0;r<this.CODE_PATTERN.length;r++)(n=this._matchPattern(e,this.CODE_PATTERN[r]))<i.error&&(i.code=r,i.error=n);if(i.error<o)return i},o.prototype._decodePayload=function(e,t,n){for(var r,o,i=0,a=e.length,s=[0,0,0,0,0];i<a;){for(r=0;r<5;r++)s[r]=e[i]*this.barSpaceRatio[0],i+=2;if(!(o=this._decodeCode(s)))return null;t.push(o.code+""),n.push(o)}return o},o.prototype._verifyCounterLength=function(e){return e.length%10==0},o.prototype._decode=function(){var e,t,n,r=[],o=[];return(e=this._findStart())?(o.push(e),(t=this._findEnd())?(n=this._fillCounters(e.end,t.start,!1),this._verifyCounterLength(n)&&this._decodePayload(n,r,o)?r.length<5?null:(o.push(t),{code:r.join(""),start:e.start,end:t.end,startInfo:e,decodedCodes:o}):null):null):null},t.a=o},function(e,t,n){"use strict";var r=n(1);function o(){r.a.call(this),this._counters=[]}o.prototype=Object.create(r.a.prototype,{ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}}),o.prototype.constructor=o,o.prototype._decode=function(){var e,t,n,r,o,i=[];if(this._counters=this._fillCounters(),!(e=this._findStart()))return null;r=e.startCounter;do{if((n=this._toPattern(r))<0)return null;if((t=this._patternToChar(n))<0)return null;if(i.push(t),r+=8,i.length>1&&this._isStartEnd(n))break}while(r<this._counters.length);return i.length-2<this.MIN_ENCODED_CHARS||!this._isStartEnd(n)?null:this._verifyWhitespace(e.startCounter,r-8)&&this._validateResult(i,e.startCounter)?(r=r>this._counters.length?this._counters.length:r,o=e.start+this._sumCounters(e.startCounter,r-8),{code:i.join(""),start:e.start,end:o,startInfo:e,decodedCodes:i}):null},o.prototype._verifyWhitespace=function(e,t){return(e-1<=0||this._counters[e-1]>=this._calculatePatternLength(e)/2)&&(t+8>=this._counters.length||this._counters[t+7]>=this._calculatePatternLength(t)/2)},o.prototype._calculatePatternLength=function(e){var t,n=0;for(t=e;t<e+7;t++)n+=this._counters[t];return n},o.prototype._thresholdResultPattern=function(e,t){var n,r,o,i,a,s=this,c={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},u=t;for(o=0;o<e.length;o++){for(a=s._charToPattern(e[o]),i=6;i>=0;i--)n=2==(1&i)?c.bar:c.space,(r=1==(1&a)?n.wide:n.narrow).size+=s._counters[u+i],r.counts++,a>>=1;u+=8}return["space","bar"].forEach(function(e){var t=c[e];t.wide.min=Math.floor((t.narrow.size/t.narrow.counts+t.wide.size/t.wide.counts)/2),t.narrow.max=Math.ceil(t.wide.min),t.wide.max=Math.ceil((t.wide.size*s.MAX_ACCEPTABLE+s.PADDING)/t.wide.counts)}),c},o.prototype._charToPattern=function(e){var t,n=e.charCodeAt(0);for(t=0;t<this.ALPHABET.length;t++)if(this.ALPHABET[t]===n)return this.CHARACTER_ENCODINGS[t];return 0},o.prototype._validateResult=function(e,t){var n,r,o,i,a,s,c=this._thresholdResultPattern(e,t),u=t;for(n=0;n<e.length;n++){for(s=this._charToPattern(e[n]),r=6;r>=0;r--){if(o=0==(1&r)?c.bar:c.space,i=1==(1&s)?o.wide:o.narrow,(a=this._counters[u+r])<i.min||a>i.max)return!1;s>>=1}u+=8}return!0},o.prototype._patternToChar=function(e){var t;for(t=0;t<this.CHARACTER_ENCODINGS.length;t++)if(this.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(this.ALPHABET[t]);return-1},o.prototype._computeAlternatingThreshold=function(e,t){var n,r,o=Number.MAX_VALUE,i=0;for(n=e;n<t;n+=2)(r=this._counters[n])>i&&(i=r),r<o&&(o=r);return(o+i)/2|0},o.prototype._toPattern=function(e){var t,n,r,o,i=e+7,a=64,s=0;if(i>this._counters.length)return-1;for(t=this._computeAlternatingThreshold(e,i),n=this._computeAlternatingThreshold(e+1,i),r=0;r<7;r++)o=0==(1&r)?t:n,this._counters[e+r]>o&&(s|=a),a>>=1;return s},o.prototype._isStartEnd=function(e){var t;for(t=0;t<this.START_END.length;t++)if(this.START_END[t]===e)return!0;return!1},o.prototype._sumCounters=function(e,t){var n,r=0;for(n=e;n<t;n++)r+=this._counters[n];return r},o.prototype._findStart=function(){var e,t,n=this._nextUnset(this._row);for(e=1;e<this._counters.length;e++)if(-1!==(t=this._toPattern(e))&&this._isStartEnd(t))return{start:n+=this._sumCounters(0,e),end:n+this._sumCounters(e,e+8),startCounter:e,endCounter:e+8}},t.a=o},function(e,t,n){"use strict";var r=n(1);function o(){r.a.call(this)}function i(e,t,n){for(var r=n.length,o=0,i=0;r--;)i+=e[n[r]],o+=t[n[r]];return i/o}o.prototype=Object.create(r.a.prototype,{CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:.64},AVG_CODE_ERROR:{value:.3},FORMAT:{value:"code_128",writeable:!1},MODULE_INDICES:{value:{bar:[0,2,4],space:[1,3,5]}}}),o.prototype.constructor=o,o.prototype._decodeCode=function(e,t){var n,r,o,a=[0,0,0,0,0,0],s=e,c=!this._row[s],u=0,l={error:Number.MAX_VALUE,code:-1,start:e,end:e,correction:{bar:1,space:1}};for(n=s;n<this._row.length;n++)if(this._row[n]^c)a[u]++;else{if(u===a.length-1){for(t&&this._correct(a,t),r=0;r<this.CODE_PATTERN.length;r++)(o=this._matchPattern(a,this.CODE_PATTERN[r]))<l.error&&(l.code=r,l.error=o);return l.end=n,-1===l.code||l.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[l.code]&&(l.correction.bar=i(this.CODE_PATTERN[l.code],a,this.MODULE_INDICES.bar),l.correction.space=i(this.CODE_PATTERN[l.code],a,this.MODULE_INDICES.space)),l)}a[++u]=1,c=!c}return null},o.prototype._correct=function(e,t){this._correctBars(e,t.bar,this.MODULE_INDICES.bar),this._correctBars(e,t.space,this.MODULE_INDICES.space)},o.prototype._findStart=function(){var e,t,n,r,o,a=[0,0,0,0,0,0],s=this._nextSet(this._row),c=!1,u=0,l={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}};for(e=s;e<this._row.length;e++)if(this._row[e]^c)a[u]++;else{if(u===a.length-1){for(o=0,r=0;r<a.length;r++)o+=a[r];for(t=this.START_CODE_A;t<=this.START_CODE_C;t++)(n=this._matchPattern(a,this.CODE_PATTERN[t]))<l.error&&(l.code=t,l.error=n);if(l.error<this.AVG_CODE_ERROR)return l.start=e-o,l.end=e,l.correction.bar=i(this.CODE_PATTERN[l.code],a,this.MODULE_INDICES.bar),l.correction.space=i(this.CODE_PATTERN[l.code],a,this.MODULE_INDICES.space),l;for(r=0;r<4;r++)a[r]=a[r+2];a[4]=0,a[5]=0,u--}else u++;a[u]=1,c=!c}return null},o.prototype._decode=function(){var e,t,n=this._findStart(),r=null,o=!1,i=[],a=0,s=0,c=[],u=[],l=!1,d=!0;if(null===n)return null;switch(r={code:n.code,start:n.start,end:n.end,correction:{bar:n.correction.bar,space:n.correction.space}},u.push(r),s=r.code,r.code){case this.START_CODE_A:e=this.CODE_A;break;case this.START_CODE_B:e=this.CODE_B;break;case this.START_CODE_C:e=this.CODE_C;break;default:return null}for(;!o;){if(t=l,l=!1,null!==(r=this._decodeCode(r.end,r.correction)))switch(r.code!==this.STOP_CODE&&(d=!0),r.code!==this.STOP_CODE&&(c.push(r.code),s+=++a*r.code),u.push(r),e){case this.CODE_A:if(r.code<64)i.push(String.fromCharCode(32+r.code));else if(r.code<96)i.push(String.fromCharCode(r.code-64));else switch(r.code!==this.STOP_CODE&&(d=!1),r.code){case this.CODE_SHIFT:l=!0,e=this.CODE_B;break;case this.CODE_B:e=this.CODE_B;break;case this.CODE_C:e=this.CODE_C;break;case this.STOP_CODE:o=!0}break;case this.CODE_B:if(r.code<96)i.push(String.fromCharCode(32+r.code));else switch(r.code!==this.STOP_CODE&&(d=!1),r.code){case this.CODE_SHIFT:l=!0,e=this.CODE_A;break;case this.CODE_A:e=this.CODE_A;break;case this.CODE_C:e=this.CODE_C;break;case this.STOP_CODE:o=!0}break;case this.CODE_C:if(r.code<100)i.push(r.code<10?"0"+r.code:r.code);else switch(r.code!==this.STOP_CODE&&(d=!1),r.code){case this.CODE_A:e=this.CODE_A;break;case this.CODE_B:e=this.CODE_B;break;case this.STOP_CODE:o=!0}}else o=!0;t&&(e=e===this.CODE_A?this.CODE_B:this.CODE_A)}return null===r?null:(r.end=this._nextUnset(this._row,r.end),this._verifyTrailingWhitespace(r)?(s-=a*c[c.length-1])%103!==c[c.length-1]?null:i.length?(d&&i.splice(i.length-1,1),{code:i.join(""),start:n.start,end:r.end,codeset:e,startInfo:n,decodedCodes:u,endInfo:r}):null:null)},r.a.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},t.a=o},function(e,t,n){"use strict";var r=n(31);function o(){r.a.call(this)}var i=/[IOQ]/g,a=/[A-Z0-9]{17}/;o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o,o.prototype._decode=function(){var e=r.a.prototype._decode.apply(this);if(!e)return null;var t=e.code;return t?(t=t.replace(i,"")).match(a)?this._checkChecksum(t)?(e.code=t,e):null:(console.log("Failed AZ09 pattern code:",t),null):null},o.prototype._checkChecksum=function(e){return!!e},t.a=o},function(e,t,n){"use strict";var r=n(1),o=n(3);function i(){r.a.call(this)}var a={ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*"},ALPHABET:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*".split("").map(function(e){return e.charCodeAt(0)})},CHARACTER_ENCODINGS:{value:[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]},ASTERISK:{value:350},FORMAT:{value:"code_93",writeable:!1}};i.prototype=Object.create(r.a.prototype,a),i.prototype.constructor=i,i.prototype._decode=function(){var e,t,n,r,i=[0,0,0,0,0,0],a=[],s=this._findStart();if(!s)return null;r=this._nextSet(this._row,s.end);do{if(i=this._toCounters(r,i),(n=this._toPattern(i))<0)return null;if((e=this._patternToChar(n))<0)return null;a.push(e),t=r,r+=o.a.sum(i),r=this._nextSet(this._row,r)}while("*"!==e);return a.pop(),a.length&&this._verifyEnd(t,r,i)&&this._verifyChecksums(a)?(a=a.slice(0,a.length-2),null===(a=this._decodeExtended(a))?null:{code:a.join(""),start:s.start,end:r,startInfo:s,decodedCodes:a}):null},i.prototype._verifyEnd=function(e,t){return!(e===t||!this._row[t])},i.prototype._patternToChar=function(e){var t;for(t=0;t<this.CHARACTER_ENCODINGS.length;t++)if(this.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(this.ALPHABET[t]);return-1},i.prototype._toPattern=function(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)r+=e[o];for(var i=0;i<t;i++){var a=Math.round(9*e[i]/r);if(a<1||a>4)return-1;if(0==(1&i))for(var s=0;s<a;s++)n=n<<1|1;else n<<=a}return n},i.prototype._findStart=function(){var e,t,n,r=this._nextSet(this._row),o=r,i=[0,0,0,0,0,0],a=0,s=!1;for(e=r;e<this._row.length;e++)if(this._row[e]^s)i[a]++;else{if(a===i.length-1){if(this._toPattern(i)===this.ASTERISK&&(n=Math.floor(Math.max(0,o-(e-o)/4)),this._matchRange(n,o,0)))return{start:o,end:e};for(o+=i[0]+i[1],t=0;t<4;t++)i[t]=i[t+2];i[4]=0,i[5]=0,a--}else a++;i[a]=1,s=!s}return null},i.prototype._decodeExtended=function(e){for(var t=e.length,n=[],r=0;r<t;r++){var o=e[r];if(o>="a"&&o<="d"){if(r>t-2)return null;var i=e[++r],a=i.charCodeAt(0),s=void 0;switch(o){case"a":if(!(i>="A"&&i<="Z"))return null;s=String.fromCharCode(a-64);break;case"b":if(i>="A"&&i<="E")s=String.fromCharCode(a-38);else if(i>="F"&&i<="J")s=String.fromCharCode(a-11);else if(i>="K"&&i<="O")s=String.fromCharCode(a+16);else if(i>="P"&&i<="S")s=String.fromCharCode(a+43);else{if(!(i>="T"&&i<="Z"))return null;s=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")s=String.fromCharCode(a-32);else{if("Z"!==i)return null;s=":"}break;case"d":if(!(i>="A"&&i<="Z"))return null;s=String.fromCharCode(a+32)}n.push(s)}else n.push(o)}return n},i.prototype._verifyChecksums=function(e){return this._matchCheckChar(e,e.length-2,20)&&this._matchCheckChar(e,e.length-1,15)},i.prototype._matchCheckChar=function(e,t,n){var r=this,o=e.slice(0,t),i=o.length,a=o.reduce(function(e,t,o){return e+((-1*o+(i-1))%n+1)*r.ALPHABET.indexOf(t.charCodeAt(0))},0);return this.ALPHABET[a%47]===e[t].charCodeAt(0)},t.a=i},function(e,t,n){"use strict";var r=n(4);function o(){r.a.call(this)}o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"ean_2",writeable:!1}}),o.prototype.constructor=o,o.prototype.decode=function(e,t){this._row=e;var n,r=0,o=0,i=t,a=this._row.length,s=[],c=[];for(o=0;o<2&&i<a;o++){if(!(n=this._decodeCode(i)))return null;c.push(n),s.push(n.code%10),n.code>=this.CODE_G_START&&(r|=1<<1-o),1!=o&&(i=this._nextSet(this._row,n.end),i=this._nextUnset(this._row,i))}return 2!=s.length||parseInt(s.join(""))%4!==r?null:{code:s.join(""),decodedCodes:c,end:n.end}},t.a=o},function(e,t,n){"use strict";var r=n(4);function o(){r.a.call(this)}var i=[24,20,18,17,12,6,3,10,9,5];o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"ean_5",writeable:!1}}),o.prototype.constructor=o,o.prototype.decode=function(e,t){this._row=e;var n,r=0,o=0,a=t,s=this._row.length,c=[],u=[];for(o=0;o<5&&a<s;o++){if(!(n=this._decodeCode(a)))return null;u.push(n),c.push(n.code%10),n.code>=this.CODE_G_START&&(r|=1<<4-o),4!=o&&(a=this._nextSet(this._row,n.end),a=this._nextUnset(this._row,a))}return 5!=c.length?null:function(e){var t,n=e.length,r=0;for(t=n-2;t>=0;t-=2)r+=e[t];for(r*=3,t=n-1;t>=0;t-=2)r+=e[t];return(r*=3)%10}(c)!==function(e){var t;for(t=0;t<10;t++)if(e===i[t])return t;return null}(r)?null:{code:c.join(""),decodedCodes:u,end:n.end}},t.a=o},function(e,t,n){"use strict";var r=n(4);function o(e,t){r.a.call(this,e,t)}o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"ean_8",writeable:!1}}),o.prototype.constructor=o,o.prototype._decodePayload=function(e,t,n){var r;for(r=0;r<4;r++){if(!(e=this._decodeCode(e.end,this.CODE_G_START)))return null;t.push(e.code),n.push(e)}if(null===(e=this._findPattern(this.MIDDLE_PATTERN,e.end,!0,!1)))return null;for(n.push(e),r=0;r<4;r++){if(!(e=this._decodeCode(e.end,this.CODE_G_START)))return null;n.push(e),t.push(e.code)}return e},t.a=o},function(e,t,n){"use strict";var r=n(28),o=n.n(r),i=n(1);function a(e){var t;e=o()((t={},Object.keys(a.CONFIG_KEYS).forEach(function(e){t[e]=a.CONFIG_KEYS[e].default}),t),e),i.a.call(this,e),this.barSpaceRatio=[1,1],e.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}a.prototype=Object.create(i.a.prototype,{START_PATTERN:{value:[1,1,1,1]},STOP_PATTERN:{value:[1,1,3]},CODE_PATTERN:{value:[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}}),a.prototype.constructor=a,a.prototype._matchPattern=function(e,t){if(this.config.normalizeBarSpaceWidth){var n,r=[0,0],o=[0,0],a=[0,0],s=this.MAX_CORRECTION_FACTOR,c=1/s;for(n=0;n<e.length;n++)r[n%2]+=e[n],o[n%2]+=t[n];for(a[0]=o[0]/r[0],a[1]=o[1]/r[1],a[0]=Math.max(Math.min(a[0],s),c),a[1]=Math.max(Math.min(a[1],s),c),this.barSpaceRatio=a,n=0;n<e.length;n++)e[n]*=this.barSpaceRatio[n%2]}return i.a.prototype._matchPattern.call(this,e,t)},a.prototype._findPattern=function(e,t,n,r){var o,i,a,s,c=[],u=0,l={error:Number.MAX_VALUE,code:-1,start:0,end:0},d=this.AVG_CODE_ERROR;for(n=n||!1,r=r||!1,t||(t=this._nextSet(this._row)),o=0;o<e.length;o++)c[o]=0;for(o=t;o<this._row.length;o++)if(this._row[o]^n)c[u]++;else{if(u===c.length-1){for(s=0,a=0;a<c.length;a++)s+=c[a];if((i=this._matchPattern(c,e))<d)return l.error=i,l.start=o-s,l.end=o,l;if(!r)return null;for(a=0;a<c.length-2;a++)c[a]=c[a+2];c[c.length-2]=0,c[c.length-1]=0,u--}else u++;c[u]=1,n=!n}return null},a.prototype._findStart=function(){for(var e,t,n=this._nextSet(this._row),r=1;!t;){if(!(t=this._findPattern(this.START_PATTERN,n,!1,!0)))return null;if(r=Math.floor((t.end-t.start)/4),(e=t.start-10*r)>=0&&this._matchRange(e,t.start,0))return t;n=t.end,t=null}},a.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},a.prototype._findEnd=function(){var e,t;return this._row.reverse(),e=this._findPattern(this.STOP_PATTERN),this._row.reverse(),null===e?null:(t=e.start,e.start=this._row.length-e.end,e.end=this._row.length-t,null!==e?this._verifyTrailingWhitespace(e):null)},a.prototype._decodePair=function(e){var t,n,r=[];for(t=0;t<e.length;t++){if(!(n=this._decodeCode(e[t])))return null;r.push(n)}return r},a.prototype._decodeCode=function(e){var t,n,r,o=this.AVG_CODE_ERROR,i={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t=0;t<e.length;t++)e[t];for(r=0;r<this.CODE_PATTERN.length;r++)(n=this._matchPattern(e,this.CODE_PATTERN[r]))<i.error&&(i.code=r,i.error=n);if(i.error<o)return i},a.prototype._decodePayload=function(e,t,n){for(var r,o,i=0,a=e.length,s=[[0,0,0,0,0],[0,0,0,0,0]];i<a;){for(r=0;r<5;r++)s[0][r]=e[i]*this.barSpaceRatio[0],s[1][r]=e[i+1]*this.barSpaceRatio[1],i+=2;if(!(o=this._decodePair(s)))return null;for(r=0;r<o.length;r++)t.push(o[r].code+""),n.push(o[r])}return o},a.prototype._verifyCounterLength=function(e){return e.length%10==0},a.prototype._decode=function(){var e,t,n,r=[],o=[];return(e=this._findStart())?(o.push(e),(t=this._findEnd())?(n=this._fillCounters(e.end,t.start,!1),this._verifyCounterLength(n)&&this._decodePayload(n,r,o)?r.length%2!=0||r.length<6?null:(o.push(t),{code:r.join(""),start:e.start,end:t.end,startInfo:e,decodedCodes:o}):null):null):null},a.CONFIG_KEYS={normalizeBarSpaceWidth:{type:"boolean",default:!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}},t.a=a},function(e,t,n){"use strict";var r=n(4);function o(e,t){r.a.call(this,e,t)}o.prototype=Object.create(r.a.prototype,{CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}}),o.prototype.constructor=o,o.prototype._decodePayload=function(e,t,n){var r,o=0;for(r=0;r<6;r++){if(!(e=this._decodeCode(e.end)))return null;e.code>=this.CODE_G_START&&(e.code=e.code-this.CODE_G_START,o|=1<<5-r),t.push(e.code),n.push(e)}return this._determineParity(o,t)?e:null},o.prototype._determineParity=function(e,t){var n,r;for(r=0;r<this.CODE_FREQUENCY.length;r++)for(n=0;n<this.CODE_FREQUENCY[r].length;n++)if(e===this.CODE_FREQUENCY[r][n])return t.unshift(r),t.push(n),!0;return!1},o.prototype._convertToUPCA=function(e){var t=[e[0]],n=e[e.length-2];return(t=n<=2?t.concat(e.slice(1,3)).concat([n,0,0,0,0]).concat(e.slice(3,6)):3===n?t.concat(e.slice(1,4)).concat([0,0,0,0,0]).concat(e.slice(4,6)):4===n?t.concat(e.slice(1,5)).concat([0,0,0,0,0,e[5]]):t.concat(e.slice(1,6)).concat([0,0,0,0,n])).push(e[e.length-1]),t},o.prototype._checksum=function(e){return r.a.prototype._checksum.call(this,this._convertToUPCA(e))},o.prototype._findEnd=function(e,t){return r.a.prototype._findEnd.call(this,e,!0)},o.prototype._verifyTrailingWhitespace=function(e){var t;if((t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0))return e},t.a=o},function(e,t,n){"use strict";var r=n(4);function o(e,t){r.a.call(this,e,t)}o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"upc_a",writeable:!1}}),o.prototype.constructor=o,o.prototype._decode=function(){var e=r.a.prototype._decode.call(this);return e&&e.code&&13===e.code.length&&"0"===e.code.charAt(0)?(e.code=e.code.substring(1),e):null},t.a=o},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},function(e,t){e.exports=function(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e}},function(e,t){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(e,t,n){var r=n(122),o=n(123),i=n(124),a=n(125),s=n(126);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(10),o=n(149),i=n(150),a=n(151),s=n(152),c=n(153);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(5).Uint8Array;e.exports=r},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(107),o=n(18),i=n(2),a=n(44),s=n(15),c=n(45),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),d=!n&&!l&&a(e),f=!n&&!l&&!d&&c(e),h=n||l||d||f,p=h?r(e.length,String):[],g=p.length;for(var y in e)!t&&!u.call(e,y)||h&&("length"==y||d&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,g))||p.push(y);return p}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(0),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){var r=n(90),o=n(128);e.exports=function e(t,n,i,a,s){var c=-1,u=t.length;for(i||(i=o),s||(s=[]);++c<u;){var l=t[c];n>0&&i(l)?n>1?e(l,n-1,i,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(e,t,n){var r=n(117)();e.exports=r},function(e,t,n){var r=n(13),o=n(23);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(8),o=n(6);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t,n){var r=n(25),o=n(132),i=n(0),a=n(155),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?f:s).test(a(e))}},function(e,t,n){var r=n(8),o=n(26),i=n(6),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(0),o=n(40),i=n(144),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t,n){var r=n(85),o=n(35),i=n(93),a=n(101),s=n(0),c=n(46);e.exports=function e(t,n,u,l,d){t!==n&&i(n,function(i,c){if(s(i))d||(d=new r),a(t,n,c,u,e,l,d);else{var f=l?l(t[c],i,c+"",t,n,d):void 0;void 0===f&&(f=i),o(t,c,f)}},c)}},function(e,t,n){var r=n(35),o=n(111),i=n(112),a=n(113),s=n(127),c=n(18),u=n(2),l=n(159),d=n(44),f=n(25),h=n(0),p=n(160),g=n(45),y=n(164);e.exports=function(e,t,n,m,v,b,_){var w=e[n],E=t[n],S=_.get(E);if(S)r(e,n,S);else{var R=b?b(w,E,n+"",e,t,_):void 0,x=void 0===R;if(x){var C=u(E),A=!C&&d(E),T=!C&&!A&&g(E);R=E,C||A||T?u(w)?R=w:l(w)?R=a(w):A?(x=!1,R=o(E,!0)):T?(x=!1,R=i(E,!0)):R=[]:p(E)||c(E)?(R=w,c(w)?R=y(w):(!h(w)||m&&f(w))&&(R=s(E))):x=!1}x&&(_.set(E,R),v(R,E,m,b,_),_.delete(E)),r(e,n,R)}}},function(e,t,n){var r=n(103),o=n(158);e.exports=function(e,t){return r(e,t,function(t,n){return o(e,n)})}},function(e,t,n){var r=n(94),o=n(105),i=n(13);e.exports=function(e,t,n){for(var a=-1,s=t.length,c={};++a<s;){var u=t[a],l=r(e,u);n(l,u)&&o(c,i(u,e),l)}return c}},function(e,t,n){var r=n(43),o=n(41),i=n(42);e.exports=function(e,t){return i(o(e,t,r),e+"")}},function(e,t,n){var r=n(36),o=n(13),i=n(15),a=n(0),s=n(23);e.exports=function(e,t,n,c){if(!a(e))return e;for(var u=-1,l=(t=o(t,e)).length,d=l-1,f=e;null!=f&&++u<l;){var h=s(t[u]),p=n;if(u!=d){var g=f[h];void 0===(p=c?c(g,h,f):void 0)&&(p=a(g)?g:i(t[u+1])?[]:{})}r(f,h,p),f=f[h]}return e}},function(e,t,n){var r=n(156),o=n(37),i=n(43),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(11),o=n(89),i=n(2),a=n(27),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(86);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){(function(e){var r=n(5),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(t,n(29)(e))},function(e,t,n){var r=n(110);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(36),o=n(21);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=i?i(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?o(n,u,l):r(n,u,l)}return n}},function(e,t,n){var r=n(5)["__core-js_shared__"];e.exports=r},function(e,t,n){var r=n(104),o=n(129);e.exports=function(e){return r(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,a)}return t})}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}},function(e,t,n){var r=n(157),o=n(41),i=n(42);e.exports=function(e){return i(o(e,void 0,r),e+"")}},function(e,t,n){var r=n(11),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(13),o=n(18),i=n(2),a=n(15),s=n(26),c=n(23);e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,d=!1;++u<l;){var f=c(t[u]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&s(l)&&a(f,l)&&(i(e)||o(e))}},function(e,t,n){var r=n(16);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(16),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(16),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(16);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(91),o=n(39),i=n(40);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},function(e,t,n){var r=n(11),o=n(18),i=n(2),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(17),o=n(24),i=n(15),a=n(0);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?o(n)&&i(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(2),o=n(27),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r,o=n(115),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(12),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(12);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(12);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(12);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(84),o=n(10),i=n(33);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,t,n){var r=n(14);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t,n){var r=n(14);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(14);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(14);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(161);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(38),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(t,n(29)(e))},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(10);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(10),o=n(33),i=n(34);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(143),o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(i,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=s},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(92);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(95),o=n(121);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t,n){var r=n(24),o=n(6);e.exports=function(e){return o(e)&&r(e)}},function(e,t,n){var r=n(8),o=n(39),i=n(6),a=Function.prototype,s=Object.prototype,c=a.toString,u=s.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(e,t,n){var r=n(34),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(102),o=n(118)(function(e,t){return null==e?{}:r(e,t)});e.exports=o},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(114),o=n(46);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(108);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){e.exports=n(48)}])})},{buffer:"dskh"}],dfhR:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./quagga.js"));class o{constructor(){this.lastResult=null}init(e){return this.stop(),this.target=e.inputStream.target,new Promise((t,n)=>{r.default.init(e,e=>{if(e)return console.log("BARCODE: Init error: "+e),void n(e);console.log("BARCODE: Init finished"),t()})})}start(){this.stop(),r.default.start(),this.callbackDetected=this.detected.bind(this),r.default.onDetected(this.callbackDetected),this.callbackProcessed=null,this.callbackProcessed&&r.default.onProcessed(this.callbackProcessed),this.started=!0}detected(e){e.codeResult&&e.codeResult.code&&(this.lastResult=e.codeResult.code,console.log("BARCODE: Detected: "+this.lastResult+" -- "+JSON.stringify(e.codeResult)),this.promiseScanCancelResolve&&this.promiseScanCancelResolve(this.lastResult),this.promiseScanCancelResolve=null,this.promiseScanCancelReject=null)}processed(e){}stop(){this.started&&(r.default.stop(),this.started=!1),this.callbackDetected&&(r.default.offDetected(this.callbackDetected),this.callbackDetected=null),this.callbackProcessed&&(r.default.offProcessed(this.callbackProcessed),this.callbackProcessed=null),this.lastResult=null,this.promiseScanCancelResolve&&this.promiseScanCancelResolve(this.lastResult),this.promiseScanCancelResolve=null,this.promiseScanCancelReject=null}async waitForScanOrCancel(){return new Promise((e,t)=>{this.promiseScanCancelResolve=e,this.promiseScanCancelReject=t})}}n.default=o,o.instance=null,o.cancel=()=>{o.instance&&o.instance.stop()},o.scan=async e=>{const t=e&&e.elementSelector?e.elementSelector:"#interactive.viewport";o.instance||(o.instance=new o);const n={inputStream:{name:"Live",type:"LiveStream",constraints:{facingMode:"environment"},target:document.querySelector(t)},decoder:{readers:["code_128_reader"],debug:!1}},r={code_128:"code_128_reader",ean:"ean_reader",ean_8:"ean_8_reader",code_39:"code_39_reader",code_39_vin:"code_39_vin_reader",codabar:"codabar_reader",upc:"upc_reader",upc_e:"upc_e_reader",i2of5:"i2of5_reader","2of5":"2of5_reader",code_93:"code_93_reader"},i=(e&&e.readers?e.readers:"code_128").split(",");if(i.length>0){n.decoder.readers=[];for(const e of i){const t=r[e];if(!t)throw new Exception("Unknown barcode type: "+e);n.decoder.readers.push(t)}}let a=null;try{console.log("BARCODE: Before init()"),await o.instance.init(n),console.log("BARCODE: Starting..."),o.instance.start(),console.log("BARCODE: Waiting..."),a=await o.instance.waitForScanOrCancel()}finally{console.log("BARCODE: Stopping..."),o.instance.stop(),console.log("BARCODE: Finished"),document.querySelector(t).innerHTML=""}return a}},{"./quagga.js":"g3U2"}],jOUA:[function(e,t,n){"use strict";var r=e("./util.mjs"),o=s(e("./key_input.mjs")),i=s(e("./device_manager.mjs")),a=s(e("./barcode.mjs"));function s(e){return e&&e.__esModule?e:{default:e}}window.addEventListener("error",function(e){return document.getElementById("warnings").appendChild(document.createTextNode("⚠️ Unhandled error.")),console.log("ERROR: Unhandled error: "+(e.error&&e.error.message?e.error.message:e.error)),console.log(JSON.stringify(e)),!1}),window.addEventListener("unhandledrejection",function(e){return document.getElementById("warnings").appendChild(document.createTextNode("⚠️ Unhandled promise rejection.")),console.log("ERROR: Unhandled rejection: "+(e.error&&e.error.message?e.error.message:e.error)),console.log(JSON.stringify(e)),!1});let c={},u=!1,l=!1,d=!0,f=!0,h=!1;function p(){h||((0,r.redirectConsole)("#output"),h=!0),l&&document.querySelector("body").classList.toggle("console",u)}(0,r.watchParameters)(E),u&&p(),"serviceWorker"in navigator&&window.addEventListener("load",async function(){try{const e="service-worker.js",t=await navigator.serviceWorker.register(e);t.onupdatefound=function(){const e=t.installing;e.onstatechange=function(){switch(e.state){case"installed":navigator.serviceWorker.controller?(console.log("SERVICEWORKER: New content available."),confirm("[ServiceWorker] Update available -- reload now?")&&window.location.reload()):console.log("SERVICEWORKER: Now available offline.");break;case"redundant":console.log("SERVICEWORKER: Installing worker was redundant.")}}}}catch(e){console.log("SERVICEWORKER: Error during registration: "+e)}}),window.applicationCache&&applicationCache.addEventListener("updateready",function(){confirm("[AppCache] Update available -- reload now?")&&window.location.reload()});let g=null,y={},m=!1,v=null,b=null,_=!0,w="code_128";function E(e=c){if(c=e,console.log("PARAMS: "+JSON.stringify(e)),void 0!==e.nodebug&&(u=!1),void 0!==e.debug&&(u=!0),u&&p(),void 0!==e.allowserial&&(f=!0),void 0!==e.noserial&&(f=!1),void 0!==e.allowusb&&(d=!0),void 0!==e.nousb&&(d=!1),!l)return;let t=!1;void 0!==e.editable&&(t=!1),void 0!==e.readonly&&(t=!0);for(let e of["#session","#rate","#range","#gyro","#start","#delay","#duration","#stop","#metadata","#minbattery"]){const n=document.querySelector(e);t?n.setAttribute("disabled","true"):n.removeAttribute("disabled")}let n=!0;void 0!==e.details&&(n=!0),void 0!==e.nodetails&&(n=!1),n?document.querySelector("#details").setAttribute("open","true"):document.querySelector("#details").removeAttribute("open");const r={session:null,rate:100,range:8,gyro:0,start:0,stop:168,metadata:""};let o=!1;for(let t of["session","rate","range","gyro","start","stop","metadata","minbattery"])void 0!==e[t]&&(r[t]=e[t]),o|=typeof r[t]!=typeof y[t]||r[t]==y[t];o?(y=r,console.log("PARAMS: Config changed: "+JSON.stringify(r)),S(r)):console.log("PARAMS: Config not changed: "+JSON.stringify(r)),e.config&&b.setValue(e.config),void 0!==e.focus&&(document.querySelector("#code").select(),document.querySelector("#code").focus()),U(document.querySelector("#code").value),document.querySelector("#add_usb_device").setAttribute("style",d?"display: inline;":"display: none;"),document.querySelector("#add_serial_device").setAttribute("style",f?"display: inline;":"display: none;"),navigator.serial||document.querySelector("#add_serial_device").setAttribute("style","display: none;"),document.querySelector("body").classList.toggle("nolog",void 0!==e.nolog),document.querySelector("body").classList.toggle("nologclear",void 0!==e.nologclear),document.querySelector("#add_usb_device").setAttribute("style",d?"display: inline;":"display: none;");let i=!0;void 0!==e.noscan&&(i=!1),void 0!==e.scan&&(i=!0),document.querySelector("body").classList.toggle("allow-scan",i),void 0!==e.readers&&(w=e.readers),void 0!==e.autosubmit&&(_=!0),void 0!==e.noautosubmit&&(_=!1),b.setAutoSubmit(_)}const S=e=>{document.querySelector("#session").value=void 0!==e.session?e.session:"",document.querySelector("#rate").value=void 0!==e.rate?e.rate:"",document.querySelector("#range").value=void 0!==e.range?e.range:"",document.querySelector("#gyro").value=void 0!==e.gyro?e.gyro:"",document.querySelector("#minbattery").value=void 0!==e.minbattery?e.minbattery:"";let t=A(e.start);t?(document.querySelector("#start").value=(0,r.localTimeString)(t,"m")||"",D()):(document.querySelector("#delay").value=e.start||0===e.start?parseFloat(e.start):"",I());let n=T(e.stop,(0,r.localTimeValue)(document.querySelector("#start").value));document.querySelector("#stop").value=null===n?document.querySelector("#start").value:(0,r.localTimeString)(n,"m")||"",N(),document.querySelector("#metadata").value=void 0!==e.metadata?e.metadata:"",R()};const R=()=>{let e=null;try{const t=function(e){const t=[],n=new Date;e.stop.getTime()<n?t.push("Recording interval has already finished."):e.start.getTime()+66e3<n?t.push("Recording interval has already started."):e.start.getTime(),e.start.getTime()>n+18144e5&&t.push("Start time is a long time in the future.");const r=(e.stop.getTime()-e.start.getTime())/1e3;return r<=0&&t.push("Start/stop times do not make an interval."),r*e.rate>158714880&&t.push("Duration is too long (for this rate)."),[6,6.25,12,12.5,25,50,100,200,400,800,1600,3200].includes(e.rate)||t.push("Rate is not valid."),t}(e=M());t&&t.length>0?L("WARNING: "+t.join("; "),!0):L("",!1),console.log("CONFIG-VALID: true"),document.querySelector("body").classList.add("config-valid")}catch(e){L(e,!0),console.log("CONFIG-VALID: false"),document.querySelector("body").classList.remove("config-valid")}const t=e&&!!g&&!B;b.submitEnabled(t)},x=()=>{let e={deviceType:null,deviceId:"-",battery:"-",state:null,errorState:null};(g=v.getSingleDevice())?(e.deviceId=g.serial||(g.status&&g.status.id&&g.status.id.deviceId?g.status.id.deviceId:"-"),g.status&&g.status.id&&g.status.id.deviceType?e.deviceType=g.status.id.deviceType:g.deviceType&&(e.deviceType=g.deviceType),null!==g.status.battery&&(e.battery=g.status.battery.percent),e.state=g.status.state,e.errorState=g.status.errorState,document.querySelector("body").classList.add("device-connected")):document.querySelector("body").classList.remove("device-connected"),document.querySelector("#device-id").value=e.deviceId+(e.deviceType?" ["+e.deviceType+"]":""),document.querySelector("#battery-meter").value=Number.isNaN(parseInt(e.battery))?0:parseInt(e.battery),document.querySelector("#battery").value=Number.isNaN(parseInt(e.battery))?"-":e.battery+"%",document.querySelector("#state").value=e.state||e.errorState||"-",g&&g.status&&g.status.recordingStarted?document.querySelector("#configure").value="⚠️ Delete device data and reconfigure":g&&g.status&&g.status.recordingConfigured?document.querySelector("#configure").value="🔁 Reconfigure":document.querySelector("#configure").value="Configure",R()},C=async()=>{if(g=v.getSingleDevice()){console.log("DEVICECHANGED: "+(g.serial?g.serial:"<no serial>")),g.setStatusHandler(x),console.log("DEVICECHANGED: updateStatus...");try{await g.updateStatus(),console.log("STATUS: "+JSON.stringify(g.status))}catch(e){console.log("DEVICECHANGED: ERROR: "+JSON.stringify(e))}}else console.log("DEVICECHANGED: (none)"),m&&(m=!1,j(!0,!0)),await x()},A=e=>{if(!e&&0!==e)return null;if(e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e))return e;if(/\d\d\d\d-\d\d-\d\d[T ]\d\d:\d\d:\d\d(?:\.\d\d\d)?Z?/.test(e))try{return new Date(e)}catch(t){console.log("ERROR: Problem parsing date: "+e)}return null},T=(e,t,n=36e5)=>{if(!e&&0!==e)return null;return A(e)||(t=t||0===t?t:new Date,new Date(t.getTime()+parseFloat(e)*n))},O=()=>""===document.querySelector("#duration").value?null:60*parseFloat(document.querySelector("#duration").value)*60*1e3,D=()=>{(0,r.localTimeValue)(document.querySelector("#start").value),document.querySelector("#delay").value="",P()},I=(e=null)=>{Number(e)===e&&(document.querySelector("#delay").value=e);const t=document.querySelector("#delay").value;if(""!==t.trim()){const e=new Date,n=new Date(e.getTime()+60*parseFloat(t)*60*1e3),o=document.querySelector("#start"),i=(0,r.localTimeString)(n,"m");o.value!=i&&(o.value=i,P())}},N=()=>{const e=(0,r.localTimeValue)(document.querySelector("#start").value),t=(0,r.localTimeValue)(document.querySelector("#stop").value);if(null===t||null===e)return void(document.querySelector("#duration").value="");const n=(t.getTime()-e.getTime())/1e3/60/60;document.querySelector("#duration").value=n},P=e=>{if(Number(e)===e){const t=e/1e3/60/60;document.querySelector("#duration").value=t}const t=(0,r.localTimeValue)(document.querySelector("#start").value);if(t){const e=O(),n=new Date(t.getTime()+e);document.querySelector("#stop").value=(0,r.localTimeString)(n,"m")}else document.querySelector("#stop").value=document.querySelector("#start").value},M=()=>{const e={session:""==document.querySelector("#session").value?null:parseInt(document.querySelector("#session").value),rate:parseFloat(document.querySelector("#rate").value),range:parseInt(document.querySelector("#range").value),gyro:parseInt(document.querySelector("#gyro").value),start:(0,r.localTimeValue)(document.querySelector("#start").value),stop:(0,r.localTimeValue)(document.querySelector("#stop").value),metadata:document.querySelector("#metadata").value,minbattery:""==document.querySelector("#minbattery").value?null:parseInt(document.querySelector("#minbattery").value)},t=[];if(("number"!=typeof e.session||isNaN(e.session))&&t.push("no session ID"),"object"==typeof e.start&&e.start||t.push("no start time"),"object"==typeof e.stop&&e.stop||t.push("no stop time"),O()<=0&&t.push("no valid interval"),t.length>0)throw"Error: "+t.join(", ")+".";return e},L=(e,t=!1)=>{document.querySelector("#result").value=t?"⚠️ "+e:e},U=e=>{console.log("CODE: "+e);const t=e.trim().length>0?parseInt("0"+e.replace(/[^0-9]/g,"").slice(-9)):"";document.querySelector("#session").value=t,document.querySelector("#metadata").value=((e,t,n)=>{e.length>0&&"?"==e[0]&&(e=e.slice(1));const r=e.split("&"),o=[];let i=!1;for(let e of r){const r=e.indexOf("="),a=decodeURIComponent(r>=0?e.slice(0,r):e).replace(/\+/g," ");a.length<=0||(a==t?i||(i=!0,null!==n&&o.push(encodeURIComponent(a)+"="+encodeURIComponent(n))):o.push(e))}return i||null===n||o.push(encodeURIComponent(t)+"="+encodeURIComponent(n)),o.join("&")})(document.querySelector("#metadata").value,"_sc",0==e.length?null:e),R()},k=(e,t)=>{let n=[];n.push((0,r.localTimeString)(t.time,"S")),n.push(e),n.push(t.deviceId),n.push(t.session),n.push((0,r.localTimeString)(t.start,"S")),n.push((0,r.localTimeString)(t.stop,"S")),n.push(t.rate),n.push(t.range),n.push('"'+t.metadata.replace(/\"/g,'""')+'"');const o=((e,t)=>{e.length>0&&"?"==e[0]&&(e=e.slice(1));const n=e.split("&");for(let e of n){const n=e.indexOf("="),r=decodeURIComponent(n>=0?e.slice(0,n):e).replace(/\+/g," ");if(!(r.length<=0)&&r==t)return decodeURIComponent(n>=0?e.slice(n+1):"").replace(/\+/g," ")}return null})(t.metadata,"_sc");n.push(t.gyro),n.push('"'+o+'"');const i=n.join(","),a="LOG_"+(new Date).toISOString().slice(0,10).replace(/[^0-9]/g,"");console.log("LOG: "+i),localStorage.setItem(a,(localStorage.getItem(a)||"")+i+"\r\n")},j=(e,t)=>{document.querySelector("body").classList.remove("completed"),m=!1,e&&b.setValue(""),t&&void 0!==c.focus&&(document.querySelector("#code").select(),document.querySelector("#code").focus()),U(document.querySelector("#code").value)};let B=!1;const z=async()=>{if(B)L("(device busy)",!0);else try{document.querySelector("body").classList.add("configuring"),B=!0;try{a.default.cancel()}catch(e){console.error(e)}document.querySelector("#configure").setAttribute("disabled","true"),document.querySelector("#start-scan").setAttribute("disabled","true"),document.querySelector("#stop-scan").setAttribute("disabled","true"),L("Configuring...",!1);const e=M();console.log(JSON.stringify(e,null,4));try{const t=await g.configure(e);console.log("CONFIG-STATUS: "+JSON.stringify(t));let n="???";g.status&&g.status.id&&g.status.id.deviceType?n=g.status.id.deviceType:g.deviceType&&(n=g.deviceType);const r=((e,t)=>{const n=[];for(let r of Object.keys(e))!r in t?(console.log(`ERROR: Configuration key not found: ${r}`),n.push([{[r]:e[r]},null])):e[r]!=t[r]&&(console.log(`ERROR: Configuration value not matched for '${r}': ${e[r]} != ${t[r]}.`),n.push([{[r]:e[r]},{[r]:t[r]}]));return n})(e,t);0==r.length?(L("ℹ️ Configured",!1),document.querySelector("body").classList.add("completed"),k(n+"-CONFIG-OK",t),m=!0):(L("ℹ️ Configured but mismatched: "+JSON.stringify(r),!0),k(n+"-CONFIG-FAILURE",e))}catch(t){let n="???";g.status&&g.status.id&&g.status.id.deviceType?n=g.status.id.deviceType:g.deviceType&&(n=g.deviceType),console.log("CONFIG-ERROR: "+JSON.stringify(t)),k(n+"-CONFIG-ERROR",e),L(t,!0)}}catch(e){console.log("CONFIGURATION: "+e),L(e,!0)}finally{document.querySelector("body").classList.remove("configuring"),B=!1,document.querySelector("#configure").removeAttribute("disabled"),document.querySelector("#start-scan").removeAttribute("disabled"),document.querySelector("#stop-scan").removeAttribute("disabled")}};window.addEventListener("DOMContentLoaded",async e=>{l=!0,v=new i.default(d,f);for(let e of v.warnings)document.getElementById("warnings").appendChild(document.createTextNode("⚠️ "+e));(b=new o.default("#code")).start(U,z),v.startup(C);const t=document.querySelector("#reconfigure");t&&t.addEventListener("click",async()=>{j(!1,!0)}),document.querySelector("#configure_new").addEventListener("click",async()=>{j(!0,!0)}),document.querySelector("#add_usb_device").addEventListener("click",async()=>{try{await v.userAddUsbDevice()}catch(e){L(e,!0)}}),document.querySelector("#add_serial_device").addEventListener("click",async()=>{try{await v.userAddSerialDevice()}catch(e){L(e,!0)}});for(let e of["#delay"]){const t=document.querySelector(e);t.addEventListener("change",I),t.addEventListener("input",I)}for(let e of["#start"]){const t=document.querySelector(e);t.addEventListener("change",D),t.addEventListener("input",D)}for(let e of["#duration"]){const t=document.querySelector(e);t.addEventListener("change",P),t.addEventListener("input",P)}for(let e of["#stop"]){const t=document.querySelector(e);t.addEventListener("change",N),t.addEventListener("input",N)}for(let e of["#session","#rate","#range","#gyro","#delay","#start","#duration","#stop","#metadata","#minbattery"]){const t=document.querySelector(e);t.addEventListener("change",R),t.addEventListener("input",R),t.addEventListener("propertychange",R)}S({session:null,rate:100,range:8,start:0,stop:null,metadata:""}),navigator.usb||document.querySelector("#add_usb_device").setAttribute("disabled","true"),navigator.serial||document.querySelector("#add_serial_device").setAttribute("disabled","true"),document.querySelector("#reset").addEventListener("click",e=>{j(!0,!0),location.reload()}),document.querySelector("#log-download").addEventListener("click",e=>{e.preventDefault();try{const t=Object.keys(localStorage).filter(e=>e.startsWith("LOG_")).sort().map(e=>localStorage.getItem(e)).join(""),n="log_"+(new Date).toISOString().replace(/[^0-9]/g,"")+".csv";(0,r.download)(n,t,"text/csv;charset=utf-8")}catch(e){console.log(e)}}),document.querySelector("#log-clear").addEventListener("click",e=>{e.preventDefault();let t=!1;{const e=prompt("DESTROY data by deleting and clearing all of the configuration logs?  Type DESTROY in capitals to confirm.");null!=e&&("DESTROY"===e?t=!0:alert("Did not delete logs"))}if(t)try{(()=>{const e=Object.keys(localStorage).filter(e=>e.startsWith("LOG_"));for(let t of e)localStorage.removeItem(t)})()}catch(e){console.log(e)}}),document.querySelector("#start-scan").addEventListener("click",async()=>{try{document.querySelector("body").classList.add("scanning");const e=await a.default.scan({readers:w});null!=e?(console.log("SCAN: Result="+e),b.setValue(e)):console.log("SCAN: No result.")}catch(e){console.log("SCAN: Error="+JSON.stringify(e)),L(e,!0)}finally{document.querySelector("body").classList.remove("scanning")}}),document.querySelector("#stop-scan").addEventListener("click",async()=>{try{a.default.cancel()}catch(e){console.error(e)}}),E(),setInterval(()=>{I(),v.refreshDevices()},5e3)})},{"./util.mjs":"x7XL","./key_input.mjs":"yzmp","./device_manager.mjs":"bqdr","./barcode.mjs":"dfhR"}]},{},["jOUA"]);</script></head><body> <div class="main"> <header> <h1>AX Configure <span class="version">beta-2021-03-31c</span></h1> <div id="warnings"><ul> <noscript>⚠️ Scripting not enabled.</noscript> </ul></div> </header> <main> <form> <div class="complete"> <div class="status">✅ Configured &mdash; please disconnect device.</div> <div class="main_button">Reconfigure: <input id="configure_new" class="button link" type="button" value="Afresh" title="New Configuration"> <input id="reconfigure" class="button link" type="button" value="Same" title="Repeat Same Configuration"> </div> </div> <div class="incomplete"> <fieldset> <legend>Configuration</legend> <div id="interactive" class="viewport"></div> <div> <label accesskey="C" for="code">Code: </label> <input id="code" type="text" placeholder="..."> <div class="scan-controls"> <button class="button" type="button" id="start-scan" title="Scan">𝄃𝄀𝄁𝄂</button> <button class="button" type="button" id="stop-scan" title="Cancel Scan">×</button> </div> </div> <details id="details" open> <summary>Details</summary> <div><label for="session">Session ID: </label><input id="session" type="number" placeholder="(none)"></div> <div><label for="rate">Rate: </label> <select id="rate" placeholder=""> <option value="3200">3200 Hz</option> <option value="1600">1600 Hz</option> <option value="800">800 Hz</option> <option value="400">400 Hz</option> <option value="200">200 Hz</option> <option value="100" selected>100 Hz</option> <option value="50">50 Hz</option> <option value="25">25 Hz</option> <option value="12.5">12.5 Hz</option> </select> </div> <div><label for="range">Range: </label> <select id="range" placeholder=""> <option value="16">&PlusMinus;16&#x1D454;</option> <option value="8" selected>&PlusMinus;8&#x1D454;</option> <option value="4">&PlusMinus;4&#x1D454;</option> <option value="2">&PlusMinus;2&#x1D454;</option> </select> </div> <div><label for="gyro">Gyro: </label> <select id="gyro" placeholder=""> <option value="2000">2000 &deg;&#x2215;s</option> <option value="1000">1000 &deg;&#x2215;s</option> <option value="500">500 &deg;&#x2215;s</option> <option value="250">250 &deg;&#x2215;s</option> <option value="0" selected>(none)</option> </select> </div> <div><label for="metadata">Metadata: </label><input id="metadata" type="text" placeholder="(none)"></div> <div><label for="delay">Delay (h): </label><input id="delay" type="number" min="0" placeholder="(hours)" step="any"></div> <div><label for="start">Start: </label><input id="start" type="datetime-local"></div> <div><label for="duration">Duration (h): </label><input id="duration" type="number" min="0" placeholder="(hours)" step="any"></div> <div><label for="stop">Stop: </label><input id="stop" type="datetime-local"></div> <div class="hidden"><label for="minbattery">Min.Batt.: </label><input id="minbattery" type="number" min="0" max="101" placeholder="(%)" step="1"></div> </details> <div><output id="result" value="-"></output></div> </fieldset> </div> <div class="disconnected"> <div class="main_button"> <input class="button" id="add_usb_device" type="button" value="Connect USB device..."> <input class="button" id="add_serial_device" type="button" value="Connect serial device..."> </div> </div> <div class="connected"> <fieldset id="device-fieldset"> <legend>Device</legend> <div><label for="device-id">Id: </label><output id="device-id">-</output></div> <div><label for="battery">Battery: </label><meter id="battery-meter" min="0" max="100" low="30" high="85" optimum="100" value="0"></meter> <output id="battery">-</output></div> <div><label for="state">State: </label><output id="state">-</output></div> </fieldset> </div> <div class="incomplete"> <div class="connected-valid"> <div class="main_button"><input id="configure" class="button" type="submit" value="Configure"></div> </div> </div> </form> </main> <footer> <div> <a href="https://github.com/digitalinteraction/openmovement-axconfig/blob/master/README.md" title="openmovement-axconfig project">ℹ️ Help</a> | <a id="reset" href="#">&#x21BA; Reset</a> <span class="log-span">| <a id="log-download" href="">&#x25BE; Download Log</a> <span class="log-clear-span">| <a id="log-clear" href="">&#x239A; Clear Log</a></span> </span> </div> </footer> </div> <output id="output">-</output> </body></html>